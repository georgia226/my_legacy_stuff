# 1 "fjpeg.c"
# 1 "<command-line>"
# 1 "fjpeg.c"
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 1 3 4
# 14 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include/stdarg.h" 1 3 4
# 41 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include/stdarg.h" 3 4
typedef __builtin_va_list __gnuc_va_list;
# 15 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 2 3 4
# 53 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/cdefs.h" 1 3 4
# 54 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 2 3 4
# 1 "/usr/include/sys/_null.h" 1 3 4
# 55 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 2 3 4
# 1 "/usr/include/sys/_types.h" 1 3 4
# 33 "/usr/include/sys/_types.h" 3 4
# 1 "/usr/include/machine/_types.h" 1 3 4





# 1 "/usr/include/x86/_types.h" 1 3 4
# 51 "/usr/include/x86/_types.h" 3 4
typedef signed char __int8_t;
typedef unsigned char __uint8_t;
typedef short __int16_t;
typedef unsigned short __uint16_t;
typedef int __int32_t;
typedef unsigned int __uint32_t;

typedef long __int64_t;
typedef unsigned long __uint64_t;
# 77 "/usr/include/x86/_types.h" 3 4
typedef __int32_t __clock_t;
typedef __int64_t __critical_t;
typedef double __double_t;
typedef float __float_t;
typedef __int64_t __intfptr_t;
typedef __int64_t __intptr_t;
# 91 "/usr/include/x86/_types.h" 3 4
typedef __int64_t __intmax_t;
typedef __int32_t __int_fast8_t;
typedef __int32_t __int_fast16_t;
typedef __int32_t __int_fast32_t;
typedef __int64_t __int_fast64_t;
typedef __int8_t __int_least8_t;
typedef __int16_t __int_least16_t;
typedef __int32_t __int_least32_t;
typedef __int64_t __int_least64_t;

typedef __int64_t __ptrdiff_t;
typedef __int64_t __register_t;
typedef __int64_t __segsz_t;
typedef __uint64_t __size_t;
typedef __int64_t __ssize_t;
typedef __int64_t __time_t;
typedef __uint64_t __uintfptr_t;
typedef __uint64_t __uintptr_t;
# 119 "/usr/include/x86/_types.h" 3 4
typedef __uint64_t __uintmax_t;
typedef __uint32_t __uint_fast8_t;
typedef __uint32_t __uint_fast16_t;
typedef __uint32_t __uint_fast32_t;
typedef __uint64_t __uint_fast64_t;
typedef __uint8_t __uint_least8_t;
typedef __uint16_t __uint_least16_t;
typedef __uint32_t __uint_least32_t;
typedef __uint64_t __uint_least64_t;

typedef __uint64_t __u_register_t;
typedef __uint64_t __vm_offset_t;
typedef __uint64_t __vm_paddr_t;
typedef __uint64_t __vm_size_t;
# 143 "/usr/include/x86/_types.h" 3 4
typedef __int64_t __vm_ooffset_t;
typedef __uint64_t __vm_pindex_t;
typedef int __wchar_t;
# 154 "/usr/include/x86/_types.h" 3 4
typedef __builtin_va_list __va_list;
# 6 "/usr/include/machine/_types.h" 2 3 4
# 34 "/usr/include/sys/_types.h" 2 3 4




typedef __uint32_t __blksize_t;
typedef __int64_t __blkcnt_t;
typedef __int32_t __clockid_t;
typedef __uint64_t __cap_rights_t;
typedef __uint32_t __fflags_t;
typedef __uint64_t __fsblkcnt_t;
typedef __uint64_t __fsfilcnt_t;
typedef __uint32_t __gid_t;
typedef __int64_t __id_t;
typedef __uint32_t __ino_t;
typedef long __key_t;
typedef __int32_t __lwpid_t;
typedef __uint16_t __mode_t;
typedef int __accmode_t;
typedef int __nl_item;
typedef __uint16_t __nlink_t;
typedef __int64_t __off_t;
typedef __int32_t __pid_t;
typedef __int64_t __rlim_t;


typedef __uint8_t __sa_family_t;
typedef __uint32_t __socklen_t;
typedef long __suseconds_t;
typedef struct __timer *__timer_t;
typedef struct __mq *__mqd_t;
typedef __uint32_t __uid_t;
typedef unsigned int __useconds_t;
typedef int __cpuwhich_t;
typedef int __cpulevel_t;
typedef int __cpusetid_t;
# 88 "/usr/include/sys/_types.h" 3 4
typedef int __ct_rune_t;
typedef __ct_rune_t __rune_t;
typedef __ct_rune_t __wint_t;

typedef __uint32_t __dev_t;

typedef __uint32_t __fixpt_t;





typedef union {
 char __mbstate8[128];
 __int64_t _mbstateL;
} __mbstate_t;
# 56 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 2 3 4

typedef __off_t fpos_t;


typedef __size_t size_t;






typedef __off_t off_t;



typedef __ssize_t ssize_t;





typedef __va_list __not_va_list__;
# 91 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
struct __sbuf {
 unsigned char *_base;
 int _size;
};
# 124 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
struct __sFILE {
 unsigned char *_p;
 int _r;
 int _w;
 short _flags;
 short _file;
 struct __sbuf _bf;
 int _lbfsize;


 void *_cookie;
 int (*_close)(void *);
 int (*_read)(void *, char *, int);
 fpos_t (*_seek)(void *, fpos_t, int);
 int (*_write)(void *, const char *, int);


 struct __sbuf _ub;
 unsigned char *_up;
 int _ur;


 unsigned char _ubuf[3];
 unsigned char _nbuf[1];


 struct __sbuf _lb;


 int _blksize;
 fpos_t _offset;

 struct pthread_mutex *_fl_mutex;
 struct pthread *_fl_owner;
 int _fl_count;
 int _orientation;
 __mbstate_t _mbstate;
};


typedef struct __sFILE FILE;



extern FILE *__stdinp;
extern FILE *__stdoutp;
extern FILE *__stderrp;

# 241 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4







void clearerr(FILE *);
int fclose(FILE *);
int feof(FILE *);
int ferror(FILE *);
int fflush(FILE *);
int fgetc(FILE *);
int fgetpos(FILE * , fpos_t * );
char *fgets(char * , int, FILE * );
FILE *fopen(const char * , const char * );
int fprintf(FILE * , const char * , ...);
int fputc(int, FILE *);
int fputs(const char * , FILE * );
size_t fread(void * , size_t, size_t, FILE * );
FILE *freopen(const char * , const char * , FILE * );
int fscanf(FILE * , const char * , ...);
int fseek(FILE *, long, int);
int fsetpos(FILE *, const fpos_t *);
long ftell(FILE *);
size_t fwrite(const void * , size_t, size_t, FILE * );
int getc(FILE *);
int getchar(void);
char *gets(char *);
void perror(const char *);
int printf(const char * , ...);
int putc(int, FILE *);
int putchar(int);
int puts(const char *);
int remove(const char *);
int rename(const char *, const char *);
void rewind(FILE *);
int scanf(const char * , ...);
void setbuf(FILE * , char * );
int setvbuf(FILE * , char * , int, size_t);
int sprintf(char * , const char * , ...);
int sscanf(const char * , const char * , ...);
FILE *tmpfile(void);
char *tmpnam(char *);
int ungetc(int, FILE *);
int vfprintf(FILE * , const char * ,
     __gnuc_va_list);
int vprintf(const char * , __gnuc_va_list);
int vsprintf(char * , const char * ,
     __gnuc_va_list);


int snprintf(char * , size_t, const char * ,
     ...) __attribute__((__format__ (__printf__, 3, 4)));
int vfscanf(FILE * , const char * , __gnuc_va_list)
     __attribute__((__format__ (__scanf__, 2, 0)));
int vscanf(const char * , __gnuc_va_list) __attribute__((__format__ (__scanf__, 1, 0)));
int vsnprintf(char * , size_t, const char * ,
     __gnuc_va_list) __attribute__((__format__ (__printf__, 3, 0)));
int vsscanf(const char * , const char * , __gnuc_va_list)
     __attribute__((__format__ (__scanf__, 2, 0)));
# 314 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
char *ctermid(char *);
FILE *fdopen(int, const char *);
int fileno(FILE *);



int pclose(FILE *);
FILE *popen(const char *, const char *);



int ftrylockfile(FILE *);
void flockfile(FILE *);
void funlockfile(FILE *);





int getc_unlocked(FILE *);
int getchar_unlocked(void);
int putc_unlocked(int, FILE *);
int putchar_unlocked(int);


void clearerr_unlocked(FILE *);
int feof_unlocked(FILE *);
int ferror_unlocked(FILE *);
int fileno_unlocked(FILE *);



int fseeko(FILE *, __off_t, int);
__off_t ftello(FILE *);



int getw(FILE *);
int putw(int, FILE *);



char *tempnam(const char *, const char *);



ssize_t getdelim(char ** , size_t * , int,
     FILE * );
int renameat(int, const char *, int, const char *);
int vdprintf(int, const char * , __gnuc_va_list);
# 408 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
int asprintf(char **, const char *, ...) __attribute__((__format__ (__printf__, 2, 3)));
char *ctermid_r(char *);
void fcloseall(void);
char *fgetln(FILE *, size_t *);
const char *fmtcheck(const char *, const char *) __attribute__((__format_arg__ (2)));
int fpurge(FILE *);
void setbuffer(FILE *, char *, int);
int setlinebuf(FILE *);
int vasprintf(char **, const char *, __gnuc_va_list)
     __attribute__((__format__ (__printf__, 2, 0)));






extern const int sys_nerr;
extern const char * const sys_errlist[];




FILE *funopen(const void *,
     int (*)(void *, char *, int),
     int (*)(void *, const char *, int),
     fpos_t (*)(void *, fpos_t, int),
     int (*)(void *));
# 443 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
int ftruncate(int, __off_t);



__off_t lseek(int, __off_t, int);



void *mmap(void *, size_t, int, int, int, __off_t);



int truncate(const char *, __off_t);






int __srget(FILE *);
int __swbuf(int, FILE *);







static __inline int __sputc(int _c, FILE *_p) {
 if (--_p->_w >= 0 || (_p->_w >= _p->_lbfsize && (char)_c != '\n'))
  return (*_p->_p++ = _c);
 else
  return (__swbuf(_c, _p));
}
# 491 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4
extern int __isthreaded;
# 534 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdio.h" 3 4

# 2 "fjpeg.c" 2
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 1 3 4
# 51 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 3 4
typedef __rune_t rune_t;
# 69 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 3 4
typedef int wchar_t;






typedef struct {
 int quot;
 int rem;
} div_t;

typedef struct {
 long quot;
 long rem;
} ldiv_t;










extern int __mb_cur_max;
extern int ___mb_cur_max(void);


__attribute__((__noreturn__)) void abort(void);
int abs(int) __attribute__((__const__));
int atexit(void (*)(void));
double atof(const char *);
int atoi(const char *);
long atol(const char *);
void *bsearch(const void *, const void *, size_t,
     size_t, int (*)(const void *, const void *));
void *calloc(size_t, size_t) __attribute__((__malloc__));
div_t div(int, int) __attribute__((__const__));
__attribute__((__noreturn__)) void exit(int);
void free(void *);
char *getenv(const char *);
long labs(long) __attribute__((__const__));
ldiv_t ldiv(long, long) __attribute__((__const__));
void *malloc(size_t) __attribute__((__malloc__));
int mblen(const char *, size_t);
size_t mbstowcs(wchar_t * , const char * , size_t);
int mbtowc(wchar_t * , const char * , size_t);
void qsort(void *, size_t, size_t,
     int (*)(const void *, const void *));
int rand(void);
void *realloc(void *, size_t);
void srand(unsigned);
double strtod(const char * , char ** );
float strtof(const char * , char ** );
long strtol(const char * , char ** , int);
long double
  strtold(const char * , char ** );
unsigned long
  strtoul(const char * , char ** , int);
int system(const char *);
int wctomb(char *, wchar_t);
size_t wcstombs(char * , const wchar_t * , size_t);
# 168 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 3 4
__attribute__((__noreturn__)) void _Exit(int);






void * aligned_alloc(size_t, size_t) __attribute__((__malloc__));
int at_quick_exit(void (*)(void));
__attribute__((__noreturn__)) void
 quick_exit(int);







int posix_memalign(void **, size_t, size_t);
int rand_r(unsigned *);
char *realpath(const char * , char * );
int setenv(const char *, const char *, int);
int unsetenv(const char *);



int getsubopt(char **, char *const *, char **);

char *mkdtemp(char *);



int mkstemp(char *);
# 213 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 3 4
long a64l(const char *);
double drand48(void);

double erand48(unsigned short[3]);


int grantpt(int);
char *initstate(unsigned long , char *, long);
long jrand48(unsigned short[3]);
char *l64a(long);
void lcong48(unsigned short[7]);
long lrand48(void);

char *mktemp(char *);


long mrand48(void);
long nrand48(unsigned short[3]);
int posix_openpt(int);
char *ptsname(int);
int putenv(char *);
long random(void);
unsigned short
 *seed48(unsigned short[3]);

int setkey(const char *);


char *setstate( char *);
void srand48(long);
void srandom(unsigned long);
int unlockpt(int);



extern const char *malloc_conf;
extern void (*malloc_message)(void *, const char *);
# 267 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/stdlib.h" 3 4
void abort2(const char *, int, void **) __attribute__((__noreturn__));
__uint32_t
  arc4random(void);
void arc4random_addrandom(unsigned char *, int);
void arc4random_buf(void *, size_t);
void arc4random_stir(void);
__uint32_t
  arc4random_uniform(__uint32_t);
char *getbsize(int *, long *);

char *cgetcap(char *, const char *, int);
int cgetclose(void);
int cgetent(char **, char **, const char *);
int cgetfirst(char **, char **);
int cgetmatch(const char *, const char *);
int cgetnext(char **, char **);
int cgetnum(char *, const char *, long *);
int cgetset(const char *);
int cgetstr(char *, const char *, char **);
int cgetustr(char *, const char *, char **);

int daemon(int, int);
char *devname(__dev_t, __mode_t);
char *devname_r(__dev_t, __mode_t, char *, int);
char *fdevname(int);
char *fdevname_r(int, char *, int);
int getloadavg(double [], int);
const char *
  getprogname(void);

int heapsort(void *, size_t, size_t, int (*)(const void *, const void *));
int l64a_r(long, char *, int);
int mergesort(void *, size_t, size_t, int (*)(const void *, const void *));
void qsort_r(void *, size_t, size_t, void *,
     int (*)(void *, const void *, const void *));
int radixsort(const unsigned char **, int, const unsigned char *,
     unsigned);
void *reallocf(void *, size_t);
int rpmatch(const char *);
void setprogname(const char *);
int sradixsort(const unsigned char **, int, const unsigned char *,
     unsigned);
void sranddev(void);
void srandomdev(void);
long long
 strtonum(const char *, long long, long long, const char **);


__int64_t
  strtoq(const char *, char **, int);
__uint64_t
  strtouq(const char *, char **, int);

extern char *suboptarg;


# 3 "fjpeg.c" 2
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 1 3 4
# 46 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 3 4
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 1 3 4
# 53 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4
# 1 "/usr/include/machine/endian.h" 1 3 4





# 1 "/usr/include/x86/endian.h" 1 3 4
# 91 "/usr/include/x86/endian.h" 3 4
static __inline __uint16_t
__bswap16_var(__uint16_t _x)
{

 return ((__uint16_t)((_x) << 8 | (_x) >> 8));
}

static __inline __uint32_t
__bswap32_var(__uint32_t _x)
{


 __asm("bswap %0" : "+r" (_x));
 return (_x);



}

static __inline __uint64_t
__bswap64_var(__uint64_t _x)
{


 __asm("bswap %0" : "+r" (_x));
 return (_x);







}
# 6 "/usr/include/machine/endian.h" 2 3 4
# 54 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 2 3 4


# 1 "/usr/include/sys/_pthreadtypes.h" 1 3 4
# 44 "/usr/include/sys/_pthreadtypes.h" 3 4
struct pthread;
struct pthread_attr;
struct pthread_cond;
struct pthread_cond_attr;
struct pthread_mutex;
struct pthread_mutex_attr;
struct pthread_once;
struct pthread_rwlock;
struct pthread_rwlockattr;
struct pthread_barrier;
struct pthread_barrier_attr;
struct pthread_spinlock;
# 65 "/usr/include/sys/_pthreadtypes.h" 3 4
typedef struct pthread *pthread_t;


typedef struct pthread_attr *pthread_attr_t;
typedef struct pthread_mutex *pthread_mutex_t;
typedef struct pthread_mutex_attr *pthread_mutexattr_t;
typedef struct pthread_cond *pthread_cond_t;
typedef struct pthread_cond_attr *pthread_condattr_t;
typedef int pthread_key_t;
typedef struct pthread_once pthread_once_t;
typedef struct pthread_rwlock *pthread_rwlock_t;
typedef struct pthread_rwlockattr *pthread_rwlockattr_t;
typedef struct pthread_barrier *pthread_barrier_t;
typedef struct pthread_barrierattr *pthread_barrierattr_t;
typedef struct pthread_spinlock *pthread_spinlock_t;







typedef void *pthread_addr_t;
typedef void *(*pthread_startroutine_t)(void *);




struct pthread_once {
 int state;
 pthread_mutex_t mutex;
};
# 57 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 2 3 4


typedef unsigned char u_char;
typedef unsigned short u_short;
typedef unsigned int u_int;
typedef unsigned long u_long;

typedef unsigned short ushort;
typedef unsigned int uint;






# 1 "/usr/include/sys/_stdint.h" 1 3 4
# 34 "/usr/include/sys/_stdint.h" 3 4
typedef __int8_t int8_t;




typedef __int16_t int16_t;




typedef __int32_t int32_t;




typedef __int64_t int64_t;




typedef __uint8_t uint8_t;




typedef __uint16_t uint16_t;




typedef __uint32_t uint32_t;




typedef __uint64_t uint64_t;




typedef __intptr_t intptr_t;



typedef __uintptr_t uintptr_t;
# 73 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 2 3 4

typedef __uint8_t u_int8_t;
typedef __uint16_t u_int16_t;
typedef __uint32_t u_int32_t;
typedef __uint64_t u_int64_t;

typedef __uint64_t u_quad_t;
typedef __int64_t quad_t;
typedef quad_t * qaddr_t;

typedef char * caddr_t;
typedef const char * c_caddr_t;


typedef __blksize_t blksize_t;



typedef __cpuwhich_t cpuwhich_t;
typedef __cpulevel_t cpulevel_t;
typedef __cpusetid_t cpusetid_t;


typedef __blkcnt_t blkcnt_t;



typedef __cap_rights_t cap_rights_t;


typedef __clock_t clock_t;




typedef __clockid_t clockid_t;



typedef __critical_t critical_t;
typedef __int64_t daddr_t;


typedef __dev_t dev_t;




typedef __fflags_t fflags_t;



typedef __fixpt_t fixpt_t;


typedef __fsblkcnt_t fsblkcnt_t;
typedef __fsfilcnt_t fsfilcnt_t;




typedef __gid_t gid_t;




typedef __uint32_t in_addr_t;




typedef __uint16_t in_port_t;




typedef __id_t id_t;




typedef __ino_t ino_t;




typedef __key_t key_t;




typedef __lwpid_t lwpid_t;




typedef __mode_t mode_t;




typedef __accmode_t accmode_t;




typedef __nlink_t nlink_t;
# 189 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4
typedef __pid_t pid_t;



typedef __register_t register_t;


typedef __rlim_t rlim_t;



typedef __segsz_t segsz_t;
# 217 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4
typedef __suseconds_t suseconds_t;




typedef __time_t time_t;




typedef __timer_t timer_t;




typedef __mqd_t mqd_t;



typedef __u_register_t u_register_t;


typedef __uid_t uid_t;




typedef __useconds_t useconds_t;



typedef __vm_offset_t vm_offset_t;
typedef __vm_ooffset_t vm_ooffset_t;
typedef __vm_paddr_t vm_paddr_t;
typedef __vm_pindex_t vm_pindex_t;
typedef __vm_size_t vm_size_t;
# 296 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4
# 1 "/usr/include/sys/select.h" 1 3 4
# 38 "/usr/include/sys/select.h" 3 4
# 1 "/usr/include/sys/_sigset.h" 1 3 4
# 51 "/usr/include/sys/_sigset.h" 3 4
typedef struct __sigset {
 __uint32_t __bits[4];
} __sigset_t;
# 39 "/usr/include/sys/select.h" 2 3 4
# 1 "/usr/include/sys/_timeval.h" 1 3 4
# 47 "/usr/include/sys/_timeval.h" 3 4
struct timeval {
 time_t tv_sec;
 suseconds_t tv_usec;
};
# 40 "/usr/include/sys/select.h" 2 3 4
# 1 "/usr/include/sys/timespec.h" 1 3 4
# 38 "/usr/include/sys/timespec.h" 3 4
# 1 "/usr/include/sys/_timespec.h" 1 3 4
# 44 "/usr/include/sys/_timespec.h" 3 4
struct timespec {
 time_t tv_sec;
 long tv_nsec;
};
# 39 "/usr/include/sys/timespec.h" 2 3 4
# 58 "/usr/include/sys/timespec.h" 3 4
struct itimerspec {
 struct timespec it_interval;
 struct timespec it_value;
};
# 41 "/usr/include/sys/select.h" 2 3 4

typedef unsigned long __fd_mask;

typedef __fd_mask fd_mask;




typedef __sigset_t sigset_t;
# 71 "/usr/include/sys/select.h" 3 4
typedef struct fd_set {
 __fd_mask __fds_bits[(((1024U) + (((sizeof(__fd_mask) * 8)) - 1)) / ((sizeof(__fd_mask) * 8)))];
} fd_set;
# 97 "/usr/include/sys/select.h" 3 4

int pselect(int, fd_set *, fd_set *, fd_set *,
 const struct timespec *, const sigset_t *);



int select(int, fd_set *, fd_set *, fd_set *, struct timeval *);


# 297 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 2 3 4
# 313 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4

# 330 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/sys/types.h" 3 4

# 47 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 2 3 4
# 1 "/usr/include/sys/unistd.h" 1 3 4
# 48 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 2 3 4
# 331 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 3 4


void _exit(int) __attribute__((__noreturn__));
int access(const char *, int);
unsigned int alarm(unsigned int);
int chdir(const char *);
int chown(const char *, uid_t, gid_t);
int close(int);
void closefrom(int);
int dup(int);
int dup2(int, int);
int execl(const char *, const char *, ...);
int execle(const char *, const char *, ...);
int execlp(const char *, const char *, ...);
int execv(const char *, char * const *);
int execve(const char *, char * const *, char * const *);
int execvp(const char *, char * const *);
pid_t fork(void);
long fpathconf(int, int);
char *getcwd(char *, size_t);
gid_t getegid(void);
uid_t geteuid(void);
gid_t getgid(void);
int getgroups(int, gid_t []);
char *getlogin(void);
pid_t getpgrp(void);
pid_t getpid(void);
pid_t getppid(void);
uid_t getuid(void);
int isatty(int);
int link(const char *, const char *);




long pathconf(const char *, int);
int pause(void);
int pipe(int *);
ssize_t read(int, void *, size_t);
int rmdir(const char *);
int setgid(gid_t);
int setpgid(pid_t, pid_t);
pid_t setsid(void);
int setuid(uid_t);
unsigned int sleep(unsigned int);
long sysconf(int);
pid_t tcgetpgrp(int);
int tcsetpgrp(int, pid_t);
char *ttyname(int);
int ttyname_r(int, char *, size_t);
int unlink(const char *);
ssize_t write(int, const void *, size_t);



size_t confstr(int, char *, size_t);


int getopt(int, char * const [], const char *);

extern char *optarg;
extern int optind, opterr, optopt;





int fsync(int);
# 411 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 3 4
int getlogin_r(char *, int);




int fchown(int, uid_t, gid_t);
ssize_t readlink(const char * , char * , size_t);


int gethostname(char *, size_t);
int setegid(gid_t);
int seteuid(uid_t);




int getsid(pid_t _pid);
int fchdir(int);
int getpgid(pid_t _pid);
int lchown(const char *, uid_t, gid_t);
ssize_t pread(int, void *, size_t, off_t);
ssize_t pwrite(int, const void *, size_t, off_t);
# 442 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 3 4
int faccessat(int, const char *, int, int);
int fchownat(int, const char *, uid_t, gid_t, int);
int fexecve(int, char *const [], char *const []);
int linkat(int, const char *, int, const char *, int);
ssize_t readlinkat(int, const char * , char * , size_t);
int symlinkat(const char *, int, const char *);
int unlinkat(int, const char *, int);
# 457 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/unistd.h" 3 4
int symlink(const char * , const char * );




char *crypt(const char *, const char *);

int encrypt(char *, int);
long gethostid(void);
int lockf(int, int, off_t);
int nice(int);
int setpgrp(pid_t _pid, pid_t _pgrp);
int setregid(gid_t, gid_t);
int setreuid(uid_t, uid_t);



void swab(const void * , void * , ssize_t);


void sync(void);




int brk(const void *);
int chroot(const char *);
int getdtablesize(void);
int getpagesize(void) __attribute__((__const__));
char *getpass(const char *);
void *sbrk(intptr_t);



char *getwd(char *);
useconds_t
  ualarm(useconds_t, useconds_t);
int usleep(useconds_t);
pid_t vfork(void) __attribute__((__returns_twice__));



struct timeval;
int acct(const char *);
int async_daemon(void);
int check_utility_compat(const char *);
const char *
  crypt_get_format(void);
int crypt_set_format(const char *);
int des_cipher(const char *, char *, long, int);
int des_setkey(const char *key);
int eaccess(const char *, int);
void endusershell(void);
int exect(const char *, char * const *, char * const *);
int execvP(const char *, const char *, char * const *);
int feature_present(const char *);
char *fflagstostr(u_long);
int getdomainname(char *, int);
int getgrouplist(const char *, gid_t, gid_t *, int *);
int getloginclass(char *, size_t);
mode_t getmode(const void *, mode_t);
int getosreldate(void);
int getpeereid(int, uid_t *, gid_t *);
int getresgid(gid_t *, gid_t *, gid_t *);
int getresuid(uid_t *, uid_t *, uid_t *);
char *getusershell(void);
int initgroups(const char *, gid_t);
int iruserok(unsigned long, int, const char *, const char *);
int iruserok_sa(const void *, int, int, const char *, const char *);
int issetugid(void);
void __FreeBSD_libc_enter_restricted_mode(void);
long lpathconf(const char *, int);





int mknod(const char *, mode_t, dev_t);






int mkstemps(char *, int);




int nfssvc(int, void *);
int nlm_syscall(int, int, int, char **);
int profil(char *, size_t, vm_offset_t, int);
int rcmd(char **, int, const char *, const char *, const char *, int *);
int rcmd_af(char **, int, const char *,
  const char *, const char *, int *, int);
int rcmdsh(char **, int, const char *,
  const char *, const char *, const char *);
char *re_comp(const char *);
int re_exec(const char *);
int reboot(int);
int revoke(const char *);
pid_t rfork(int);
pid_t rfork_thread(int, void *, int (*)(void *), void *);
int rresvport(int *);
int rresvport_af(int *, int);
int ruserok(const char *, int, const char *, const char *);






int setdomainname(const char *, int);
int setgroups(int, const gid_t *);
void sethostid(long);
int sethostname(const char *, int);




int setlogin(const char *);
int setloginclass(const char *);
void *setmode(const char *);
void setproctitle(const char *_fmt, ...) ;
int setresgid(gid_t, gid_t, gid_t);
int setresuid(uid_t, uid_t, uid_t);
int setrgid(gid_t);
int setruid(uid_t);
void setusershell(void);
int strtofflags(char **, u_long *, u_long *);
int swapon(const char *);
int swapoff(const char *);
int syscall(int, ...);
off_t __syscall(quad_t, ...);
int undelete(const char *);
int unwhiteout(const char *);
void *valloc(size_t);



extern int optreset;



# 4 "fjpeg.c" 2
# 1 "/usr/include/string.h" 1 3 4
# 45 "/usr/include/string.h" 3 4
# 1 "/usr/include/strings.h" 1 3 4
# 40 "/usr/include/strings.h" 3 4


int bcmp(const void *, const void *, size_t) __attribute__((__pure__));
void bcopy(const void *, void *, size_t);
void bzero(void *, size_t);


int ffs(int) __attribute__((__const__));


int ffsl(long) __attribute__((__const__));
int ffsll(long long) __attribute__((__const__));
int fls(int) __attribute__((__const__));
int flsl(long) __attribute__((__const__));
int flsll(long long) __attribute__((__const__));


char *index(const char *, int) __attribute__((__pure__));
char *rindex(const char *, int) __attribute__((__pure__));

int strcasecmp(const char *, const char *) __attribute__((__pure__));
int strncasecmp(const char *, const char *, size_t) __attribute__((__pure__));

# 46 "/usr/include/string.h" 2 3 4









void *memccpy(void * , const void * , int, size_t);

void *memchr(const void *, int, size_t) __attribute__((__pure__));

void *memrchr(const void *, int, size_t) __attribute__((__pure__));

int memcmp(const void *, const void *, size_t) __attribute__((__pure__));
void *memcpy(void * , const void * , size_t);

void *memmem(const void *, size_t, const void *, size_t) __attribute__((__pure__));

void *memmove(void *, const void *, size_t);
void *memset(void *, int, size_t);

char *stpcpy(char * , const char * );
char *stpncpy(char * , const char * , size_t);


char *strcasestr(const char *, const char *) __attribute__((__pure__));

char *strcat(char * , const char * );
char *strchr(const char *, int) __attribute__((__pure__));
int strcmp(const char *, const char *) __attribute__((__pure__));
int strcoll(const char *, const char *);
char *strcpy(char * , const char * );
size_t strcspn(const char *, const char *) __attribute__((__pure__));

char *strdup(const char *) __attribute__((__malloc__));

char *strerror(int);

int strerror_r(int, char *, size_t);


size_t strlcat(char * , const char * , size_t);
size_t strlcpy(char * , const char * , size_t);

size_t strlen(const char *) __attribute__((__pure__));

void strmode(int, char *);

char *strncat(char * , const char * , size_t);
int strncmp(const char *, const char *, size_t) __attribute__((__pure__));
char *strncpy(char * , const char * , size_t);

char *strndup(const char *, size_t) __attribute__((__malloc__));
size_t strnlen(const char *, size_t) __attribute__((__pure__));


char *strnstr(const char *, const char *, size_t) __attribute__((__pure__));

char *strpbrk(const char *, const char *) __attribute__((__pure__));
char *strrchr(const char *, int) __attribute__((__pure__));

char *strsep(char **, const char *);


char *strsignal(int);

size_t strspn(const char *, const char *) __attribute__((__pure__));
char *strstr(const char *, const char *) __attribute__((__pure__));
char *strtok(char * , const char * );

char *strtok_r(char *, const char *, char **);

size_t strxfrm(char * , const char * , size_t);
# 137 "/usr/include/string.h" 3 4
# 1 "/usr/include/xlocale/_string.h" 1 3 4
# 31 "/usr/include/xlocale/_string.h" 3 4
typedef struct _xlocale *locale_t;
# 46 "/usr/include/xlocale/_string.h" 3 4
int strcoll_l(const char *, const char *, locale_t);
size_t strxfrm_l(char *, const char *, size_t, locale_t);
# 138 "/usr/include/string.h" 2 3 4


# 5 "fjpeg.c" 2
# 1 "/usr/include/time.h" 1 3 4
# 117 "/usr/include/time.h" 3 4
struct tm {
 int tm_sec;
 int tm_min;
 int tm_hour;
 int tm_mday;
 int tm_mon;
 int tm_year;
 int tm_wday;
 int tm_yday;
 int tm_isdst;
 long tm_gmtoff;
 char *tm_zone;
};


extern char *tzname[];



char *asctime(const struct tm *);
clock_t clock(void);
char *ctime(const time_t *);
double difftime(time_t, time_t);

struct tm *gmtime(const time_t *);
struct tm *localtime(const time_t *);
time_t mktime(struct tm *);
size_t strftime(char * , size_t, const char * ,
    const struct tm * );
time_t time(time_t *);

struct sigevent;
int timer_create(clockid_t, struct sigevent *, timer_t *);
int timer_delete(timer_t);
int timer_gettime(timer_t, struct itimerspec *);
int timer_getoverrun(timer_t);
int timer_settime(timer_t, int, const struct itimerspec *,
 struct itimerspec *);


void tzset(void);



int clock_getres(clockid_t, struct timespec *);
int clock_gettime(clockid_t, struct timespec *);
int clock_settime(clockid_t, const struct timespec *);

int nanosleep(const struct timespec *, struct timespec *);



char *asctime_r(const struct tm *, char *);
char *ctime_r(const time_t *, char *);
struct tm *gmtime_r(const time_t *, struct tm *);
struct tm *localtime_r(const time_t *, struct tm *);



char *strptime(const char * , const char * ,
    struct tm * );



char *timezone(int, int);
void tzsetwall(void);
time_t timelocal(struct tm * const);
time_t timegm(struct tm * const);



# 1 "/usr/include/xlocale/_time.h" 1 3 4
# 45 "/usr/include/xlocale/_time.h" 3 4
size_t strftime_l(char * , size_t, const char * ,
     const struct tm * , locale_t) __attribute__((__format__ (__strftime__, 3, 0)));
# 189 "/usr/include/time.h" 2 3 4


# 6 "fjpeg.c" 2
# 1 "/usr/include/sys/time.h" 1 3 4
# 40 "/usr/include/sys/time.h" 3 4
struct timezone {
 int tz_minuteswest;
 int tz_dsttime;
};
# 53 "/usr/include/sys/time.h" 3 4
struct bintime {
 time_t sec;
 uint64_t frac;
};

static __inline void
bintime_addx(struct bintime *bt, uint64_t x)
{
 uint64_t u;

 u = bt->frac;
 bt->frac += x;
 if (u > bt->frac)
  bt->sec++;
}

static __inline void
bintime_add(struct bintime *bt, const struct bintime *bt2)
{
 uint64_t u;

 u = bt->frac;
 bt->frac += bt2->frac;
 if (u > bt->frac)
  bt->sec++;
 bt->sec += bt2->sec;
}

static __inline void
bintime_sub(struct bintime *bt, const struct bintime *bt2)
{
 uint64_t u;

 u = bt->frac;
 bt->frac -= bt2->frac;
 if (u < bt->frac)
  bt->sec--;
 bt->sec -= bt2->sec;
}

static __inline void
bintime_mul(struct bintime *bt, u_int x)
{
 uint64_t p1, p2;

 p1 = (bt->frac & 0xffffffffull) * x;
 p2 = (bt->frac >> 32) * x + (p1 >> 32);
 bt->sec *= x;
 bt->sec += (p2 >> 32);
 bt->frac = (p2 << 32) | (p1 & 0xffffffffull);
}
# 126 "/usr/include/sys/time.h" 3 4
static __inline void
bintime2timespec(const struct bintime *bt, struct timespec *ts)
{

 ts->tv_sec = bt->sec;
 ts->tv_nsec = ((uint64_t)1000000000 * (uint32_t)(bt->frac >> 32)) >> 32;
}

static __inline void
timespec2bintime(const struct timespec *ts, struct bintime *bt)
{

 bt->sec = ts->tv_sec;

 bt->frac = ts->tv_nsec * (uint64_t)18446744073LL;
}

static __inline void
bintime2timeval(const struct bintime *bt, struct timeval *tv)
{

 tv->tv_sec = bt->sec;
 tv->tv_usec = ((uint64_t)1000000 * (uint32_t)(bt->frac >> 32)) >> 32;
}

static __inline void
timeval2bintime(const struct timeval *tv, struct bintime *bt)
{

 bt->sec = tv->tv_sec;

 bt->frac = tv->tv_usec * (uint64_t)18446744073709LL;
}
# 238 "/usr/include/sys/time.h" 3 4
struct itimerval {
 struct timeval it_interval;
 struct timeval it_value;
};




struct clockinfo {
 int hz;
 int tick;
 int spare;
 int stathz;
 int profhz;
};
# 341 "/usr/include/sys/time.h" 3 4

int setitimer(int, const struct itimerval *, struct itimerval *);
int utimes(const char *, const struct timeval *);


int adjtime(const struct timeval *, struct timeval *);
int futimes(int, const struct timeval *);
int futimesat(int, const char *, const struct timeval [2]);
int lutimes(const char *, const struct timeval *);
int settimeofday(const struct timeval *, const struct timezone *);



int getitimer(int, struct itimerval *);
int gettimeofday(struct timeval *, struct timezone *);



# 7 "fjpeg.c" 2

# 1 "/usr/include/sys/stat.h" 1 3 4
# 122 "/usr/include/sys/stat.h" 3 4
struct stat {
 __dev_t st_dev;
 ino_t st_ino;
 mode_t st_mode;
 nlink_t st_nlink;
 uid_t st_uid;
 gid_t st_gid;
 __dev_t st_rdev;
 struct timespec st_atim;
 struct timespec st_mtim;
 struct timespec st_ctim;
 off_t st_size;
 blkcnt_t st_blocks;
 blksize_t st_blksize;
 fflags_t st_flags;
 __uint32_t st_gen;
 __int32_t st_lspare;
 struct timespec st_birthtim;
# 148 "/usr/include/sys/stat.h" 3 4
 unsigned int :(8 / 2) * (16 - (int)sizeof(struct timespec));
 unsigned int :(8 / 2) * (16 - (int)sizeof(struct timespec));
};
# 293 "/usr/include/sys/stat.h" 3 4


int chflags(const char *, unsigned long);

int chmod(const char *, mode_t);

int fchflags(int, unsigned long);


int fchmod(int, mode_t);


int fchmodat(int, const char *, mode_t, int);

int fstat(int, struct stat *);

int lchflags(const char *, int);
int lchmod(const char *, mode_t);


int lstat(const char * , struct stat * );

int mkdir(const char *, mode_t);
int mkfifo(const char *, mode_t);




int stat(const char * , struct stat * );
mode_t umask(mode_t);

int fstatat(int, const char *, struct stat *, int);
int mkdirat(int, const char *, mode_t);
int mkfifoat(int, const char *, mode_t);


int mknodat(int, const char *, mode_t, dev_t);


# 9 "fjpeg.c" 2

# 1 "fpar.h" 1



# 1 "/usr/include/ctype.h" 1 3 4
# 46 "/usr/include/ctype.h" 3 4
# 1 "/usr/include/_ctype.h" 1 3 4
# 70 "/usr/include/_ctype.h" 3 4

unsigned long ___runetype(__ct_rune_t) __attribute__((__pure__));
__ct_rune_t ___tolower(__ct_rune_t) __attribute__((__pure__));
__ct_rune_t ___toupper(__ct_rune_t) __attribute__((__pure__));

# 86 "/usr/include/_ctype.h" 3 4
extern int __mb_sb_limit;







# 1 "/usr/include/runetype.h" 1 3 4
# 48 "/usr/include/runetype.h" 3 4
typedef struct {
 __rune_t __min;
 __rune_t __max;
 __rune_t __map;
 unsigned long *__types;
} _RuneEntry;

typedef struct {
 int __nranges;
 _RuneEntry *__ranges;
} _RuneRange;

typedef struct {
 char __magic[8];
 char __encoding[32];

 __rune_t (*__sgetrune)(const char *, __size_t, char const **);
 int (*__sputrune)(__rune_t, char *, __size_t, char **);
 __rune_t __invalid_rune;

 unsigned long __runetype[(1 <<8 )];
 __rune_t __maplower[(1 <<8 )];
 __rune_t __mapupper[(1 <<8 )];






 _RuneRange __runetype_ext;
 _RuneRange __maplower_ext;
 _RuneRange __mapupper_ext;

 void *__variable;
 int __variable_len;
} _RuneLocale;



extern const _RuneLocale _DefaultRuneLocale;
extern const _RuneLocale *_CurrentRuneLocale;



extern __thread const _RuneLocale *_ThreadRuneLocale;
static __inline const _RuneLocale *__getCurrentRuneLocale(void)
{

 if (_ThreadRuneLocale)
  return _ThreadRuneLocale;
 if (_CurrentRuneLocale)
  return _CurrentRuneLocale;
 return &_DefaultRuneLocale;
}



# 95 "/usr/include/_ctype.h" 2 3 4

static __inline int
__maskrune(__ct_rune_t _c, unsigned long _f)
{
 return ((_c < 0 || _c >= (1 <<8 )) ? ___runetype(_c) :
  (__getCurrentRuneLocale())->__runetype[_c]) & _f;
}

static __inline int
__sbmaskrune(__ct_rune_t _c, unsigned long _f)
{
 return (_c < 0 || _c >= __mb_sb_limit) ? 0 :
        (__getCurrentRuneLocale())->__runetype[_c] & _f;
}

static __inline int
__istype(__ct_rune_t _c, unsigned long _f)
{
 return (!!__maskrune(_c, _f));
}

static __inline int
__sbistype(__ct_rune_t _c, unsigned long _f)
{
 return (!!__sbmaskrune(_c, _f));
}

static __inline int
__isctype(__ct_rune_t _c, unsigned long _f)
{
 return (_c < 0 || _c >= 128) ? 0 :
        !!(_DefaultRuneLocale.__runetype[_c] & _f);
}

static __inline __ct_rune_t
__toupper(__ct_rune_t _c)
{
 return (_c < 0 || _c >= (1 <<8 )) ? ___toupper(_c) :
        (__getCurrentRuneLocale())->__mapupper[_c];
}

static __inline __ct_rune_t
__sbtoupper(__ct_rune_t _c)
{
 return (_c < 0 || _c >= __mb_sb_limit) ? _c :
        (__getCurrentRuneLocale())->__mapupper[_c];
}

static __inline __ct_rune_t
__tolower(__ct_rune_t _c)
{
 return (_c < 0 || _c >= (1 <<8 )) ? ___tolower(_c) :
        (__getCurrentRuneLocale())->__maplower[_c];
}

static __inline __ct_rune_t
__sbtolower(__ct_rune_t _c)
{
 return (_c < 0 || _c >= __mb_sb_limit) ? _c :
        (__getCurrentRuneLocale())->__maplower[_c];
}

static __inline int
__wcwidth(__ct_rune_t _c)
{
 unsigned int _x;

 if (_c == 0)
  return (0);
 _x = (unsigned int)__maskrune(_c, 0xe0000000L|0x00040000L);
 if ((_x & 0xe0000000L) != 0)
  return ((_x & 0xe0000000L) >> 30);
 return ((_x & 0x00040000L) != 0 ? 1 : -1);
}
# 47 "/usr/include/ctype.h" 2 3 4


int isalnum(int);
int isalpha(int);
int iscntrl(int);
int isdigit(int);
int isgraph(int);
int islower(int);
int isprint(int);
int ispunct(int);
int isspace(int);
int isupper(int);
int isxdigit(int);
int tolower(int);
int toupper(int);


int isascii(int);
int toascii(int);



int isblank(int);



int digittoint(int);
int ishexnumber(int);
int isideogram(int);
int isnumber(int);
int isphonogram(int);
int isrune(int);
int isspecial(int);



# 1 "/usr/include/xlocale/_ctype.h" 1 3 4
# 49 "/usr/include/xlocale/_ctype.h" 3 4
unsigned long ___runetype_l(__ct_rune_t, locale_t) __attribute__((__pure__));
__ct_rune_t ___tolower_l(__ct_rune_t, locale_t) __attribute__((__pure__));
__ct_rune_t ___toupper_l(__ct_rune_t, locale_t) __attribute__((__pure__));
_RuneLocale *__runes_for_locale(locale_t, int*);
# 96 "/usr/include/xlocale/_ctype.h" 3 4
extern __inline int
__sbmaskrune_l(__ct_rune_t __c, unsigned long __f, locale_t __loc);
extern __inline int
__sbistype_l(__ct_rune_t __c, unsigned long __f, locale_t __loc);

extern __inline int
__sbmaskrune_l(__ct_rune_t __c, unsigned long __f, locale_t __loc)
{
 int __limit;
 _RuneLocale *runes = __runes_for_locale(__loc, &__limit);
 return (__c < 0 || __c >= __limit) ? 0 :
        runes->__runetype[__c] & __f;
}

extern __inline int
__sbistype_l(__ct_rune_t __c, unsigned long __f, locale_t __loc)
{
 return (!!__sbmaskrune_l(__c, __f, __loc));
}







extern __inline int isalnum_l(int, locale_t); extern __inline int isalnum_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000100L|0x00000400L, __l); }
extern __inline int isalpha_l(int, locale_t); extern __inline int isalpha_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000100L, __l); }
extern __inline int isblank_l(int, locale_t); extern __inline int isblank_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00020000L, __l); }
extern __inline int iscntrl_l(int, locale_t); extern __inline int iscntrl_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000200L, __l); }
extern __inline int isdigit_l(int, locale_t); extern __inline int isdigit_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000400L, __l); }
extern __inline int isgraph_l(int, locale_t); extern __inline int isgraph_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000800L, __l); }
extern __inline int ishexnumber_l(int, locale_t); extern __inline int ishexnumber_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00010000L, __l); }
extern __inline int isideogram_l(int, locale_t); extern __inline int isideogram_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00080000L, __l); }
extern __inline int islower_l(int, locale_t); extern __inline int islower_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00001000L, __l); }
extern __inline int isnumber_l(int, locale_t); extern __inline int isnumber_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00000400L, __l); }
extern __inline int isphonogram_l(int, locale_t); extern __inline int isphonogram_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00200000L, __l); }
extern __inline int isprint_l(int, locale_t); extern __inline int isprint_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00040000L, __l); }
extern __inline int ispunct_l(int, locale_t); extern __inline int ispunct_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00002000L, __l); }
extern __inline int isrune_l(int, locale_t); extern __inline int isrune_l(int __c, locale_t __l) { return __sbistype_l(__c, 0xFFFFFF00L, __l); }
extern __inline int isspace_l(int, locale_t); extern __inline int isspace_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00004000L, __l); }
extern __inline int isspecial_l(int, locale_t); extern __inline int isspecial_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00100000L, __l); }
extern __inline int isupper_l(int, locale_t); extern __inline int isupper_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00008000L, __l); }
extern __inline int isxdigit_l(int, locale_t); extern __inline int isxdigit_l(int __c, locale_t __l) { return __sbistype_l(__c, 0x00010000L, __l); }
# 180 "/usr/include/xlocale/_ctype.h" 3 4
extern __inline int digittoint_l(int, locale_t);
extern __inline int tolower_l(int, locale_t);
extern __inline int toupper_l(int, locale_t);

extern __inline int digittoint_l(int __c, locale_t __l)
{ return __sbmaskrune_l((__c), 0xFF, __l); }

extern __inline int tolower_l(int __c, locale_t __l)
{
 int __limit;
 _RuneLocale *__runes = __runes_for_locale(__l, &__limit);
 return (__c < 0 || __c >= __limit) ? __c :
        __runes->__maplower[__c];
}
extern __inline int toupper_l(int __c, locale_t __l)
{
 int __limit;
 _RuneLocale *__runes = __runes_for_locale(__l, &__limit);
 return (__c < 0 || __c >= __limit) ? __c :
        __runes->__mapupper[__c];
}
# 84 "/usr/include/ctype.h" 2 3 4


# 5 "fpar.h" 2
# 1 "/usr/include/math.h" 1 3 4
# 22 "/usr/include/math.h" 3 4
# 1 "/usr/include/machine/_limits.h" 1 3 4





# 1 "/usr/include/x86/_limits.h" 1 3 4
# 6 "/usr/include/machine/_limits.h" 2 3 4
# 23 "/usr/include/math.h" 2 3 4




extern const union __infinity_un {
 unsigned char __uc[8];
 double __ud;
} __infinity;

extern const union __nan_un {
 unsigned char __uc[sizeof(float)];
 float __uf;
} __nan;
# 127 "/usr/include/math.h" 3 4
typedef __double_t double_t;
typedef __float_t float_t;
# 150 "/usr/include/math.h" 3 4
extern int signgam;
# 167 "/usr/include/math.h" 3 4




int __fpclassifyd(double) __attribute__((__const__));
int __fpclassifyf(float) __attribute__((__const__));
int __fpclassifyl(long double) __attribute__((__const__));
int __isfinitef(float) __attribute__((__const__));
int __isfinite(double) __attribute__((__const__));
int __isfinitel(long double) __attribute__((__const__));
int __isinff(float) __attribute__((__const__));
int __isinfl(long double) __attribute__((__const__));
int __isnanf(float) __attribute__((__const__));
int __isnanl(long double) __attribute__((__const__));
int __isnormalf(float) __attribute__((__const__));
int __isnormal(double) __attribute__((__const__));
int __isnormall(long double) __attribute__((__const__));
int __signbit(double) __attribute__((__const__));
int __signbitf(float) __attribute__((__const__));
int __signbitl(long double) __attribute__((__const__));

double acos(double);
double asin(double);
double atan(double);
double atan2(double, double);
double cos(double);
double sin(double);
double tan(double);

double cosh(double);
double sinh(double);
double tanh(double);

double exp(double);
double frexp(double, int *);
double ldexp(double, int);
double log(double);
double log10(double);
double modf(double, double *);

double pow(double, double);
double sqrt(double);

double ceil(double);
double fabs(double) __attribute__((__const__));
double floor(double);
double fmod(double, double);





double acosh(double);
double asinh(double);
double atanh(double);
double cbrt(double);
double erf(double);
double erfc(double);
double exp2(double);
double expm1(double);
double fma(double, double, double);
double hypot(double, double);
int ilogb(double) __attribute__((__const__));
int (isinf)(double) __attribute__((__const__));
int (isnan)(double) __attribute__((__const__));
double lgamma(double);
long long llrint(double);
long long llround(double);
double log1p(double);
double log2(double);
double logb(double);
long lrint(double);
long lround(double);
double nan(const char *) __attribute__((__const__));
double nextafter(double, double);
double remainder(double, double);
double remquo(double, double, int *);
double rint(double);



double j0(double);
double j1(double);
double jn(int, double);
double y0(double);
double y1(double);
double yn(int, double);


double gamma(double);



double scalb(double, double);




double copysign(double, double) __attribute__((__const__));
double fdim(double, double);
double fmax(double, double) __attribute__((__const__));
double fmin(double, double) __attribute__((__const__));
double nearbyint(double);
double round(double);
double scalbln(double, long);
double scalbn(double, int);
double tgamma(double);
double trunc(double);






double drem(double, double);
int finite(double) __attribute__((__const__));
int isnanf(float) __attribute__((__const__));





double gamma_r(double, int *);
double lgamma_r(double, int *);




double significand(double);




float acosf(float);
float asinf(float);
float atanf(float);
float atan2f(float, float);
float cosf(float);
float sinf(float);
float tanf(float);

float coshf(float);
float sinhf(float);
float tanhf(float);

float exp2f(float);
float expf(float);
float expm1f(float);
float frexpf(float, int *);
int ilogbf(float) __attribute__((__const__));
float ldexpf(float, int);
float log10f(float);
float log1pf(float);
float log2f(float);
float logf(float);
float modff(float, float *);

float powf(float, float);
float sqrtf(float);

float ceilf(float);
float fabsf(float) __attribute__((__const__));
float floorf(float);
float fmodf(float, float);
float roundf(float);

float erff(float);
float erfcf(float);
float hypotf(float, float);
float lgammaf(float);
float tgammaf(float);

float acoshf(float);
float asinhf(float);
float atanhf(float);
float cbrtf(float);
float logbf(float);
float copysignf(float, float) __attribute__((__const__));
long long llrintf(float);
long long llroundf(float);
long lrintf(float);
long lroundf(float);
float nanf(const char *) __attribute__((__const__));
float nearbyintf(float);
float nextafterf(float, float);
float remainderf(float, float);
float remquof(float, float, int *);
float rintf(float);
float scalblnf(float, long);
float scalbnf(float, int);
float truncf(float);

float fdimf(float, float);
float fmaf(float, float, float);
float fmaxf(float, float) __attribute__((__const__));
float fminf(float, float) __attribute__((__const__));






float dremf(float, float);
int finitef(float) __attribute__((__const__));
float gammaf(float);
float j0f(float);
float j1f(float);
float jnf(int, float);
float scalbf(float, float);
float y0f(float);
float y1f(float);
float ynf(int, float);






float gammaf_r(float, int *);
float lgammaf_r(float, int *);




float significandf(float);






long double acosl(long double);
long double asinl(long double);
long double atan2l(long double, long double);
long double atanl(long double);
long double cbrtl(long double);
long double ceill(long double);
long double copysignl(long double, long double) __attribute__((__const__));
long double cosl(long double);
long double exp2l(long double);
long double expl(long double);
long double fabsl(long double) __attribute__((__const__));
long double fdiml(long double, long double);
long double floorl(long double);
long double fmal(long double, long double, long double);
long double fmaxl(long double, long double) __attribute__((__const__));
long double fminl(long double, long double) __attribute__((__const__));
long double fmodl(long double, long double);
long double frexpl(long double value, int *);
long double hypotl(long double, long double);
int ilogbl(long double) __attribute__((__const__));
long double ldexpl(long double, int);
long long llrintl(long double);
long long llroundl(long double);
long double logbl(long double);
long lrintl(long double);
long lroundl(long double);
long double modfl(long double, long double *);
long double nanl(const char *) __attribute__((__const__));
long double nearbyintl(long double);
long double nextafterl(long double, long double);
double nexttoward(double, long double);
float nexttowardf(float, long double);
long double nexttowardl(long double, long double);
long double remainderl(long double, long double);
long double remquol(long double, long double, int *);
long double rintl(long double);
long double roundl(long double);
long double scalblnl(long double, long);
long double scalbnl(long double, int);
long double sinl(long double);
long double sqrtl(long double);
long double tanl(long double);
long double truncl(long double);



# 6 "fpar.h" 2
# 1 "udf.h" 1
# 1 "/usr/include/math.h" 1 3 4
# 2 "udf.h" 2



double udf1(double);
double udf2(double, double);
double udf3(double, double, double);

unsigned long udfi1(unsigned long);
unsigned long udfi2(unsigned long, unsigned long);
unsigned long udfi3(unsigned long, unsigned long, unsigned long);
unsigned long udfi6(unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long);
# 7 "fpar.h" 2


double fpar_f(int, double, double**);
int fpar_function(int, int, int, char* tab);
void fpar_info();
void fpar_free(int);
void fpar_deinit();
int fpar_ok(int);
int fpar_init(int);
# 11 "fjpeg.c" 2


# 1 "/usr/include/pthread.h" 1 3 4
# 43 "/usr/include/pthread.h" 3 4
# 1 "/usr/include/machine/_limits.h" 1 3 4
# 44 "/usr/include/pthread.h" 2 3 4
# 1 "/usr/include/machine/_types.h" 1 3 4
# 45 "/usr/include/pthread.h" 2 3 4

# 1 "/usr/include/sched.h" 1 3 4
# 209 "/usr/include/sched.h" 3 4
struct sched_param {
        int sched_priority;
};
# 225 "/usr/include/sched.h" 3 4
struct timespec;


int sched_get_priority_max(int);
int sched_get_priority_min(int);
int sched_getparam(pid_t, struct sched_param *);
int sched_getscheduler(pid_t);
int sched_rr_get_interval(pid_t, struct timespec *);
int sched_setparam(pid_t, const struct sched_param *);
int sched_setscheduler(pid_t, int, const struct sched_param *);
int sched_yield(void);

# 47 "/usr/include/pthread.h" 2 3 4
# 128 "/usr/include/pthread.h" 3 4
enum pthread_mutextype {
 PTHREAD_MUTEX_ERRORCHECK = 1,
 PTHREAD_MUTEX_RECURSIVE = 2,
 PTHREAD_MUTEX_NORMAL = 3,
 PTHREAD_MUTEX_ADAPTIVE_NP = 4,
 PTHREAD_MUTEX_TYPE_MAX
};



struct _pthread_cleanup_info {
 __uintptr_t pthread_cleanup_pad[8];
};





int pthread_atfork(void (*)(void), void (*)(void), void (*)(void));
int pthread_attr_destroy(pthread_attr_t *);
int pthread_attr_getstack(const pthread_attr_t * ,
   void ** , size_t * );
int pthread_attr_getstacksize(const pthread_attr_t *, size_t *);
int pthread_attr_getguardsize(const pthread_attr_t *, size_t *);
int pthread_attr_getstackaddr(const pthread_attr_t *, void **);
int pthread_attr_getdetachstate(const pthread_attr_t *, int *);
int pthread_attr_init(pthread_attr_t *);
int pthread_attr_setstacksize(pthread_attr_t *, size_t);
int pthread_attr_setguardsize(pthread_attr_t *, size_t);
int pthread_attr_setstack(pthread_attr_t *, void *, size_t);
int pthread_attr_setstackaddr(pthread_attr_t *, void *);
int pthread_attr_setdetachstate(pthread_attr_t *, int);
int pthread_barrier_destroy(pthread_barrier_t *);
int pthread_barrier_init(pthread_barrier_t *,
   const pthread_barrierattr_t *, unsigned);
int pthread_barrier_wait(pthread_barrier_t *);
int pthread_barrierattr_destroy(pthread_barrierattr_t *);
int pthread_barrierattr_getpshared(const pthread_barrierattr_t *,
   int *);
int pthread_barrierattr_init(pthread_barrierattr_t *);
int pthread_barrierattr_setpshared(pthread_barrierattr_t *, int);
# 182 "/usr/include/pthread.h" 3 4
int pthread_condattr_destroy(pthread_condattr_t *);
int pthread_condattr_getclock(const pthread_condattr_t *,
   clockid_t *);
int pthread_condattr_getpshared(const pthread_condattr_t *, int *);
int pthread_condattr_init(pthread_condattr_t *);
int pthread_condattr_setclock(pthread_condattr_t *, clockid_t);
int pthread_condattr_setpshared(pthread_condattr_t *, int);
int pthread_cond_broadcast(pthread_cond_t *);
int pthread_cond_destroy(pthread_cond_t *);
int pthread_cond_init(pthread_cond_t *,
   const pthread_condattr_t *);
int pthread_cond_signal(pthread_cond_t *);
int pthread_cond_timedwait(pthread_cond_t *,
   pthread_mutex_t *, const struct timespec *);
int pthread_cond_wait(pthread_cond_t *, pthread_mutex_t *);
int pthread_create(pthread_t *, const pthread_attr_t *,
   void *(*) (void *), void *);
int pthread_detach(pthread_t);
int pthread_equal(pthread_t, pthread_t);
void pthread_exit(void *) __attribute__((__noreturn__));
void *pthread_getspecific(pthread_key_t);
int pthread_getcpuclockid(pthread_t, clockid_t *);
int pthread_join(pthread_t, void **);
int pthread_key_create(pthread_key_t *,
   void (*) (void *));
int pthread_key_delete(pthread_key_t);
int pthread_mutexattr_init(pthread_mutexattr_t *);
int pthread_mutexattr_destroy(pthread_mutexattr_t *);
int pthread_mutexattr_getpshared(const pthread_mutexattr_t *,
   int *);
int pthread_mutexattr_gettype(pthread_mutexattr_t *, int *);
int pthread_mutexattr_settype(pthread_mutexattr_t *, int);
int pthread_mutexattr_setpshared(pthread_mutexattr_t *, int);
int pthread_mutex_destroy(pthread_mutex_t *);
int pthread_mutex_init(pthread_mutex_t *,
   const pthread_mutexattr_t *);
int pthread_mutex_lock(pthread_mutex_t *);
int pthread_mutex_trylock(pthread_mutex_t *);
int pthread_mutex_timedlock(pthread_mutex_t *,
   const struct timespec *);
int pthread_mutex_unlock(pthread_mutex_t *);
int pthread_once(pthread_once_t *, void (*) (void));
int pthread_rwlock_destroy(pthread_rwlock_t *);
int pthread_rwlock_init(pthread_rwlock_t *,
   const pthread_rwlockattr_t *);
int pthread_rwlock_rdlock(pthread_rwlock_t *);
int pthread_rwlock_timedrdlock(pthread_rwlock_t *,
   const struct timespec *);
int pthread_rwlock_timedwrlock(pthread_rwlock_t *,
   const struct timespec *);
int pthread_rwlock_tryrdlock(pthread_rwlock_t *);
int pthread_rwlock_trywrlock(pthread_rwlock_t *);
int pthread_rwlock_unlock(pthread_rwlock_t *);
int pthread_rwlock_wrlock(pthread_rwlock_t *);
int pthread_rwlockattr_destroy(pthread_rwlockattr_t *);
int pthread_rwlockattr_getkind_np(const pthread_rwlockattr_t *,
   int *);
int pthread_rwlockattr_getpshared(const pthread_rwlockattr_t *,
   int *);
int pthread_rwlockattr_init(pthread_rwlockattr_t *);
int pthread_rwlockattr_setkind_np(pthread_rwlockattr_t *, int);
int pthread_rwlockattr_setpshared(pthread_rwlockattr_t *, int);
pthread_t pthread_self(void);
int pthread_setspecific(pthread_key_t, const void *);

int pthread_spin_init(pthread_spinlock_t *, int);
int pthread_spin_destroy(pthread_spinlock_t *);
int pthread_spin_lock(pthread_spinlock_t *);
int pthread_spin_trylock(pthread_spinlock_t *);
int pthread_spin_unlock(pthread_spinlock_t *);
int pthread_cancel(pthread_t);
int pthread_setcancelstate(int, int *);
int pthread_setcanceltype(int, int *);
void pthread_testcancel(void);


int pthread_getprio(pthread_t);
int pthread_setprio(pthread_t, int);
void pthread_yield(void);


int pthread_mutexattr_getprioceiling(pthread_mutexattr_t *,
   int *);
int pthread_mutexattr_setprioceiling(pthread_mutexattr_t *,
   int);
int pthread_mutex_getprioceiling(pthread_mutex_t *, int *);
int pthread_mutex_setprioceiling(pthread_mutex_t *, int, int *);

int pthread_mutexattr_getprotocol(pthread_mutexattr_t *, int *);
int pthread_mutexattr_setprotocol(pthread_mutexattr_t *, int);

int pthread_attr_getinheritsched(const pthread_attr_t *, int *);
int pthread_attr_getschedparam(const pthread_attr_t *,
   struct sched_param *);
int pthread_attr_getschedpolicy(const pthread_attr_t *, int *);
int pthread_attr_getscope(const pthread_attr_t *, int *);
int pthread_attr_setinheritsched(pthread_attr_t *, int);
int pthread_attr_setschedparam(pthread_attr_t *,
   const struct sched_param *);
int pthread_attr_setschedpolicy(pthread_attr_t *, int);
int pthread_attr_setscope(pthread_attr_t *, int);
int pthread_getschedparam(pthread_t pthread, int *,
   struct sched_param *);
int pthread_setschedparam(pthread_t, int,
   const struct sched_param *);

int pthread_getconcurrency(void);
int pthread_setconcurrency(int);


void __pthread_cleanup_push_imp(void (*)(void *), void *,
   struct _pthread_cleanup_info *);
void __pthread_cleanup_pop_imp(int);

# 14 "fjpeg.c" 2



# 1 "/usr/include/sys/mman.h" 1 3 4
# 218 "/usr/include/sys/mman.h" 3 4






int getpagesizes(size_t *, int);
int madvise(void *, size_t, int);
int mincore(const void *, size_t, char *);
int minherit(void *, size_t, int);

int mlock(const void *, size_t);




int mprotect(const void *, size_t, int);
int msync(void *, size_t, int);
int munlock(const void *, size_t);
int munmap(void *, size_t);

int posix_madvise(void *, size_t, int);


int mlockall(int);
int munlockall(void);
int shm_open(const char *, int, mode_t);
int shm_unlink(const char *);


# 18 "fjpeg.c" 2



# 1 "/usr/local/include/png.h" 1 3
# 439 "/usr/local/include/png.h" 3
# 1 "/usr/local/include/pnglibconf.h" 1 3
# 440 "/usr/local/include/png.h" 2 3
# 453 "/usr/local/include/png.h" 3
# 1 "/usr/include/setjmp.h" 1 3 4
# 44 "/usr/include/setjmp.h" 3 4
# 1 "/usr/include/machine/setjmp.h" 1 3 4





# 1 "/usr/include/x86/setjmp.h" 1 3 4
# 45 "/usr/include/x86/setjmp.h" 3 4
typedef struct _sigjmp_buf { long _sjb[12]; } sigjmp_buf[1];


typedef struct _jmp_buf { long _jb[12]; } jmp_buf[1];
# 6 "/usr/include/machine/setjmp.h" 2 3 4
# 45 "/usr/include/setjmp.h" 2 3 4



void _longjmp(jmp_buf, int) __attribute__((__noreturn__));
int _setjmp(jmp_buf) __attribute__((__returns_twice__));

void longjmp(jmp_buf, int) __attribute__((__noreturn__));

void longjmperror(void);

int setjmp(jmp_buf) __attribute__((__returns_twice__));

void siglongjmp(sigjmp_buf, int) __attribute__((__noreturn__));
int sigsetjmp(sigjmp_buf, int) __attribute__((__returns_twice__));


# 454 "/usr/local/include/png.h" 2 3
# 466 "/usr/local/include/png.h" 3
# 1 "/usr/local/include/pngconf.h" 1 3
# 31 "/usr/local/include/pngconf.h" 3
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 1 3 4
# 34 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 3 4
# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/syslimits.h" 1 3 4






# 1 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 1 3 4
# 169 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 3 4
# 1 "/usr/include/limits.h" 1 3 4
# 138 "/usr/include/limits.h" 3 4
# 1 "/usr/include/sys/limits.h" 1 3 4
# 36 "/usr/include/sys/limits.h" 3 4
# 1 "/usr/include/machine/_limits.h" 1 3 4
# 37 "/usr/include/sys/limits.h" 2 3 4
# 139 "/usr/include/limits.h" 2 3 4


# 1 "/usr/include/sys/syslimits.h" 1 3 4
# 142 "/usr/include/limits.h" 2 3 4
# 170 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 2 3 4
# 8 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/syslimits.h" 2 3 4
# 35 "/usr/local/lib/gcc48/gcc/x86_64-portbld-freebsd10.0/4.8.0/include-fixed/limits.h" 2 3 4
# 32 "/usr/local/include/pngconf.h" 2 3
# 441 "/usr/local/include/pngconf.h" 3
typedef unsigned int png_uint_32;
typedef int png_int_32;




typedef unsigned short png_uint_16;
typedef short png_int_16;
typedef unsigned char png_byte;




typedef size_t png_size_t;
# 521 "/usr/local/include/pngconf.h" 3
typedef png_int_32 png_fixed_point;


typedef void * png_voidp;
typedef const void * png_const_voidp;
typedef png_byte * png_bytep;
typedef const png_byte * png_const_bytep;
typedef png_uint_32 * png_uint_32p;
typedef const png_uint_32 * png_const_uint_32p;
typedef png_int_32 * png_int_32p;
typedef const png_int_32 * png_const_int_32p;
typedef png_uint_16 * png_uint_16p;
typedef const png_uint_16 * png_const_uint_16p;
typedef png_int_16 * png_int_16p;
typedef const png_int_16 * png_const_int_16p;
typedef char * png_charp;
typedef const char * png_const_charp;
typedef png_fixed_point * png_fixed_point_p;
typedef const png_fixed_point * png_const_fixed_point_p;
typedef png_size_t * png_size_tp;
typedef const png_size_t * png_const_size_tp;


typedef FILE * png_FILE_p;



typedef double * png_doublep;
typedef const double * png_const_doublep;



typedef png_byte * * png_bytepp;
typedef png_uint_32 * * png_uint_32pp;
typedef png_int_32 * * png_int_32pp;
typedef png_uint_16 * * png_uint_16pp;
typedef png_int_16 * * png_int_16pp;
typedef const char * * png_const_charpp;
typedef char * * png_charpp;
typedef png_fixed_point * * png_fixed_point_pp;

typedef double * * png_doublepp;



typedef char * * * png_charppp;
# 591 "/usr/local/include/pngconf.h" 3
       typedef png_size_t png_alloc_size_t;
# 467 "/usr/local/include/png.h" 2 3
# 567 "/usr/local/include/png.h" 3
typedef char* png_libpng_version_1_5_12;





typedef struct png_color_struct
{
   png_byte red;
   png_byte green;
   png_byte blue;
} png_color;
typedef png_color * png_colorp;
typedef const png_color * png_const_colorp;
typedef png_color * * png_colorpp;

typedef struct png_color_16_struct
{
   png_byte index;
   png_uint_16 red;
   png_uint_16 green;
   png_uint_16 blue;
   png_uint_16 gray;
} png_color_16;
typedef png_color_16 * png_color_16p;
typedef const png_color_16 * png_const_color_16p;
typedef png_color_16 * * png_color_16pp;

typedef struct png_color_8_struct
{
   png_byte red;
   png_byte green;
   png_byte blue;
   png_byte gray;
   png_byte alpha;
} png_color_8;
typedef png_color_8 * png_color_8p;
typedef const png_color_8 * png_const_color_8p;
typedef png_color_8 * * png_color_8pp;





typedef struct png_sPLT_entry_struct
{
   png_uint_16 red;
   png_uint_16 green;
   png_uint_16 blue;
   png_uint_16 alpha;
   png_uint_16 frequency;
} png_sPLT_entry;
typedef png_sPLT_entry * png_sPLT_entryp;
typedef const png_sPLT_entry * png_const_sPLT_entryp;
typedef png_sPLT_entry * * png_sPLT_entrypp;






typedef struct png_sPLT_struct
{
   png_charp name;
   png_byte depth;
   png_sPLT_entryp entries;
   png_int_32 nentries;
} png_sPLT_t;
typedef png_sPLT_t * png_sPLT_tp;
typedef const png_sPLT_t * png_const_sPLT_tp;
typedef png_sPLT_t * * png_sPLT_tpp;
# 657 "/usr/local/include/png.h" 3
typedef struct png_text_struct
{
   int compression;




   png_charp key;
   png_charp text;

   png_size_t text_length;
   png_size_t itxt_length;
   png_charp lang;

   png_charp lang_key;

} png_text;
typedef png_text * png_textp;
typedef const png_text * png_const_textp;
typedef png_text * * png_textpp;
# 695 "/usr/local/include/png.h" 3
typedef struct png_time_struct
{
   png_uint_16 year;
   png_byte month;
   png_byte day;
   png_byte hour;
   png_byte minute;
   png_byte second;
} png_time;
typedef png_time * png_timep;
typedef const png_time * png_const_timep;
typedef png_time * * png_timepp;
# 715 "/usr/local/include/png.h" 3
typedef struct png_unknown_chunk_t
{
    png_byte name[5];
    png_byte *data;
    png_size_t size;


    png_byte location;
}


png_unknown_chunk;
typedef png_unknown_chunk * png_unknown_chunkp;
typedef const png_unknown_chunk * png_const_unknown_chunkp;
typedef png_unknown_chunk * * png_unknown_chunkpp;
# 742 "/usr/local/include/png.h" 3
typedef struct png_info_def png_info;
typedef png_info * png_infop;
typedef const png_info * png_const_infop;
typedef png_info * * png_infopp;
# 856 "/usr/local/include/png.h" 3
typedef struct png_row_info_struct
{
   png_uint_32 width;
   png_size_t rowbytes;
   png_byte color_type;
   png_byte bit_depth;
   png_byte channels;
   png_byte pixel_depth;
} png_row_info;

typedef png_row_info * png_row_infop;
typedef png_row_info * * png_row_infopp;





typedef struct png_struct_def png_struct;
typedef const png_struct * png_const_structp;
typedef png_struct * png_structp;
# 885 "/usr/local/include/png.h" 3
typedef void ( *png_error_ptr) (png_structp, png_const_charp);
typedef void ( *png_rw_ptr) (png_structp, png_bytep, png_size_t);
typedef void ( *png_flush_ptr) (png_structp);
typedef void ( *png_read_status_ptr) (png_structp, png_uint_32, int)
         ;
typedef void ( *png_write_status_ptr) (png_structp, png_uint_32, int)
         ;


typedef void ( *png_progressive_info_ptr) (png_structp, png_infop);
typedef void ( *png_progressive_end_ptr) (png_structp, png_infop);

typedef void ( *png_progressive_frame_ptr) (png_structp, png_uint_32)
                 ;
# 911 "/usr/local/include/png.h" 3
typedef void ( *png_progressive_row_ptr) (png_structp, png_bytep, png_uint_32, int)
                      ;




typedef void ( *png_user_transform_ptr) (png_structp, png_row_infop, png_bytep)
               ;



typedef int ( *png_user_chunk_ptr) (png_structp, png_unknown_chunkp)
                        ;


typedef void ( *png_unknown_chunk_ptr) (png_structp);
# 941 "/usr/local/include/png.h" 3
typedef void ( *png_longjmp_ptr) (jmp_buf, int);
# 978 "/usr/local/include/png.h" 3
typedef png_voidp ( *png_malloc_ptr) (png_structp, png_alloc_size_t)
                      ;
typedef void ( *png_free_ptr) (png_structp, png_voidp);

typedef png_struct * * png_structpp;
# 1014 "/usr/local/include/png.h" 3
extern png_uint_32 ( png_access_version_number) (void);




extern void ( png_set_sig_bytes) (png_structp png_ptr, int num_bytes);






extern int ( png_sig_cmp) (png_const_bytep sig, png_size_t start, png_size_t num_to_check)
                             ;







extern __attribute__((__malloc__)) png_structp ( png_create_read_struct) (png_const_charp user_png_ver, png_voidp error_ptr, png_error_ptr error_fn, png_error_ptr warn_fn)


                  ;


extern __attribute__((__malloc__)) png_structp ( png_create_write_struct) (png_const_charp user_png_ver, png_voidp error_ptr, png_error_ptr error_fn, png_error_ptr warn_fn)


                  ;

extern png_size_t ( png_get_compression_buffer_size) (png_const_structp png_ptr)
                                ;

extern void ( png_set_compression_buffer_size) (png_structp png_ptr, png_size_t size)
                     ;
# 1063 "/usr/local/include/png.h" 3
extern jmp_buf* ( png_set_longjmp_fn) (png_structp png_ptr, png_longjmp_ptr longjmp_fn, size_t jmp_buf_size)
                                                     ;
# 1076 "/usr/local/include/png.h" 3
extern __attribute__((__noreturn__)) void ( png_longjmp) (png_structp png_ptr, int val)
                 ;



extern int ( png_reset_zstream) (png_structp png_ptr);




extern __attribute__((__malloc__)) png_structp ( png_create_read_struct_2) (png_const_charp user_png_ver, png_voidp error_ptr, png_error_ptr error_fn, png_error_ptr warn_fn, png_voidp mem_ptr, png_malloc_ptr malloc_fn, png_free_ptr free_fn)



                  ;
extern __attribute__((__malloc__)) png_structp ( png_create_write_struct_2) (png_const_charp user_png_ver, png_voidp error_ptr, png_error_ptr error_fn, png_error_ptr warn_fn, png_voidp mem_ptr, png_malloc_ptr malloc_fn, png_free_ptr free_fn)



                  ;



extern void ( png_write_sig) (png_structp png_ptr);


extern void ( png_write_chunk) (png_structp png_ptr, png_const_bytep chunk_name, png_const_bytep data, png_size_t length)
                                                         ;


extern void ( png_write_chunk_start) (png_structp png_ptr, png_const_bytep chunk_name, png_uint_32 length)
                                                    ;


extern void ( png_write_chunk_data) (png_structp png_ptr, png_const_bytep data, png_size_t length)
                                             ;


extern void ( png_write_chunk_end) (png_structp png_ptr);


extern __attribute__((__malloc__)) png_infop ( png_create_info_struct) (png_structp png_ptr)
                  ;

extern void ( png_info_init_3) (png_infopp info_ptr, png_size_t png_info_struct_size)
                                     ;


extern void ( png_write_info_before_PLTE) (png_structp png_ptr, png_infop info_ptr)
                                              ;
extern void ( png_write_info) (png_structp png_ptr, png_infop info_ptr)
                                              ;



extern void ( png_read_info) (png_structp png_ptr, png_infop info_ptr)
                                              ;



extern png_const_charp ( png_convert_to_rfc1123) (png_structp png_ptr, png_const_timep ptime)

                           ;




extern void ( png_convert_from_struct_tm) (png_timep ptime, const struct tm * ttime)
                                     ;


extern void ( png_convert_from_time_t) (png_timep ptime, time_t ttime)
                                    ;




extern void ( png_set_expand) (png_structp png_ptr);
extern void ( png_set_expand_gray_1_2_4_to_8) (png_structp png_ptr);
extern void ( png_set_palette_to_rgb) (png_structp png_ptr);
extern void ( png_set_tRNS_to_alpha) (png_structp png_ptr);






extern void ( png_set_expand_16) (png_structp png_ptr);




extern void ( png_set_bgr) (png_structp png_ptr);




extern void ( png_set_gray_to_rgb) (png_structp png_ptr);
# 1183 "/usr/local/include/png.h" 3
extern void ( png_set_rgb_to_gray) (png_structp png_ptr, int error_action, double red, double green)
                                                ;
extern void ( png_set_rgb_to_gray_fixed) (png_structp png_ptr, int error_action, png_fixed_point red, png_fixed_point green)
                                                                  ;

extern png_byte ( png_get_rgb_to_gray_status) (png_const_structp png_ptr)
             ;



extern void ( png_build_grayscale_palette) (int bit_depth, png_colorp palette)
                        ;
# 1253 "/usr/local/include/png.h" 3
extern void ( png_set_alpha_mode) (png_structp png_ptr, int mode, double output_gamma)
                         ;
extern void ( png_set_alpha_mode_fixed) (png_structp png_ptr, int mode, png_fixed_point output_gamma)
                                            ;
# 1407 "/usr/local/include/png.h" 3
extern void ( png_set_strip_alpha) (png_structp png_ptr);




extern void ( png_set_swap_alpha) (png_structp png_ptr);




extern void ( png_set_invert_alpha) (png_structp png_ptr);




extern void ( png_set_filler) (png_structp png_ptr, png_uint_32 filler, int flags)
               ;




extern void ( png_set_add_alpha) (png_structp png_ptr, png_uint_32 filler, int flags)

               ;




extern void ( png_set_swap) (png_structp png_ptr);




extern void ( png_set_packing) (png_structp png_ptr);





extern void ( png_set_packswap) (png_structp png_ptr);




extern void ( png_set_shift) (png_structp png_ptr, png_const_color_8p true_bits)
               ;
# 1463 "/usr/local/include/png.h" 3
extern int ( png_set_interlace_handling) (png_structp png_ptr);




extern void ( png_set_invert_mono) (png_structp png_ptr);
# 1477 "/usr/local/include/png.h" 3
extern void ( png_set_background) (png_structp png_ptr, png_const_color_16p background_color, int background_gamma_code, int need_expand, double background_gamma)

                                              ;
extern void ( png_set_background_fixed) (png_structp png_ptr, png_const_color_16p background_color, int background_gamma_code, int need_expand, png_fixed_point background_gamma)

                                                       ;
# 1493 "/usr/local/include/png.h" 3
extern void ( png_set_scale_16) (png_structp png_ptr);





extern void ( png_set_strip_16) (png_structp png_ptr);






extern void ( png_set_quantize) (png_structp png_ptr, png_colorp palette, int num_palette, int maximum_colors, png_const_uint_16p histogram, int full_quantize)


                       ;
# 1529 "/usr/local/include/png.h" 3
extern void ( png_set_gamma) (png_structp png_ptr, double screen_gamma, double override_file_gamma)

                                ;
extern void ( png_set_gamma_fixed) (png_structp png_ptr, png_fixed_point screen_gamma, png_fixed_point override_file_gamma)
                                                                       ;




extern void ( png_set_flush) (png_structp png_ptr, int nrows);

extern void ( png_write_flush) (png_structp png_ptr);



extern void ( png_start_read_image) (png_structp png_ptr);


extern void ( png_read_update_info) (png_structp png_ptr, png_infop info_ptr)
                                              ;



extern void ( png_read_rows) (png_structp png_ptr, png_bytepp row, png_bytepp display_row, png_uint_32 num_rows)
                                                  ;




extern void ( png_read_row) (png_structp png_ptr, png_bytep row, png_bytep display_row)
                           ;




extern void ( png_read_image) (png_structp png_ptr, png_bytepp image);



extern void ( png_write_row) (png_structp png_ptr, png_const_bytep row)
                                               ;






extern void ( png_write_rows) (png_structp png_ptr, png_bytepp row, png_uint_32 num_rows)
                          ;


extern void ( png_write_image) (png_structp png_ptr, png_bytepp image)
                                            ;


extern void ( png_write_end) (png_structp png_ptr, png_infop info_ptr)
                                              ;



extern void ( png_read_end) (png_structp png_ptr, png_infop info_ptr);



extern void ( png_destroy_info_struct) (png_structp png_ptr, png_infopp info_ptr_ptr)
                             ;


extern void ( png_destroy_read_struct) (png_structpp png_ptr_ptr, png_infopp info_ptr_ptr, png_infopp end_info_ptr_ptr)
                                                          ;


extern void ( png_destroy_write_struct) (png_structpp png_ptr_ptr, png_infopp info_ptr_ptr)
                             ;


extern void ( png_set_crc_action) (png_structp png_ptr, int crit_action, int ancil_action)
                                                             ;
# 1635 "/usr/local/include/png.h" 3
extern void ( png_set_filter) (png_structp png_ptr, int method, int filters)
                                                   ;
# 1691 "/usr/local/include/png.h" 3
extern void ( png_set_filter_heuristics) (png_structp png_ptr, int heuristic_method, int num_weights, png_const_doublep filter_weights, png_const_doublep filter_costs)

                                    ;
extern void ( png_set_filter_heuristics_fixed) (png_structp png_ptr, int heuristic_method, int num_weights, png_const_fixed_point_p filter_weights, png_const_fixed_point_p filter_costs)


                                                          ;
# 1716 "/usr/local/include/png.h" 3
extern void ( png_set_compression_level) (png_structp png_ptr, int level)
                                     ;

extern void ( png_set_compression_mem_level) (png_structp png_ptr, int mem_level)
                   ;

extern void ( png_set_compression_strategy) (png_structp png_ptr, int strategy)
                  ;




extern void ( png_set_compression_window_bits) (png_structp png_ptr, int window_bits)
                     ;

extern void ( png_set_compression_method) (png_structp png_ptr, int method)
                ;




extern void ( png_set_text_compression_level) (png_structp png_ptr, int level)
                                     ;

extern void ( png_set_text_compression_mem_level) (png_structp png_ptr, int mem_level)
                   ;

extern void ( png_set_text_compression_strategy) (png_structp png_ptr, int strategy)
                  ;




extern void ( png_set_text_compression_window_bits) (png_structp png_ptr, int window_bits)
                              ;

extern void ( png_set_text_compression_method) (png_structp png_ptr, int method)
                ;
# 1767 "/usr/local/include/png.h" 3
extern void ( png_init_io) (png_structp png_ptr, png_FILE_p fp);
# 1778 "/usr/local/include/png.h" 3
extern void ( png_set_error_fn) (png_structp png_ptr, png_voidp error_ptr, png_error_ptr error_fn, png_error_ptr warning_fn)

                                                      ;


extern png_voidp ( png_get_error_ptr) (png_const_structp png_ptr);
# 1795 "/usr/local/include/png.h" 3
extern void ( png_set_write_fn) (png_structp png_ptr, png_voidp io_ptr, png_rw_ptr write_data_fn, png_flush_ptr output_flush_fn)
                                                             ;


extern void ( png_set_read_fn) (png_structp png_ptr, png_voidp io_ptr, png_rw_ptr read_data_fn)
                             ;


extern png_voidp ( png_get_io_ptr) (png_structp png_ptr);

extern void ( png_set_read_status_fn) (png_structp png_ptr, png_read_status_ptr read_row_fn)
                                     ;

extern void ( png_set_write_status_fn) (png_structp png_ptr, png_write_status_ptr write_row_fn)
                                       ;



extern void ( png_set_mem_fn) (png_structp png_ptr, png_voidp mem_ptr, png_malloc_ptr malloc_fn, png_free_ptr free_fn)
                                                    ;

extern png_voidp ( png_get_mem_ptr) (png_const_structp png_ptr);



extern void ( png_set_read_user_transform_fn) (png_structp png_ptr, png_user_transform_ptr read_user_transform_fn)
                                                   ;



extern void ( png_set_write_user_transform_fn) (png_structp png_ptr, png_user_transform_ptr write_user_transform_fn)
                                                    ;



extern void ( png_set_user_transform_info) (png_structp png_ptr, png_voidp user_transform_ptr, int user_transform_depth, int user_transform_channels)

                                 ;

extern png_voidp ( png_get_user_transform_ptr) (png_const_structp png_ptr)
                                ;
# 1850 "/usr/local/include/png.h" 3
extern png_uint_32 ( png_get_current_row_number) (png_const_structp);
extern png_byte ( png_get_current_pass_number) (png_const_structp);



extern void ( png_set_read_user_chunk_fn) (png_structp png_ptr, png_voidp user_chunk_ptr, png_user_chunk_ptr read_user_chunk_fn)
                                                                     ;
extern png_voidp ( png_get_user_chunk_ptr) (png_const_structp png_ptr);






extern void ( png_set_progressive_read_fn) (png_structp png_ptr, png_voidp progressive_ptr, png_progressive_info_ptr info_fn, png_progressive_row_ptr row_fn, png_progressive_end_ptr end_fn)

                                                                    ;


extern png_voidp ( png_get_progressive_ptr) (png_const_structp png_ptr);


extern void ( png_process_data) (png_structp png_ptr, png_infop info_ptr, png_bytep buffer, png_size_t buffer_size)

                                              ;
# 1883 "/usr/local/include/png.h" 3
extern png_size_t ( png_process_data_pause) (png_structp, int save);







extern png_uint_32 ( png_process_data_skip) (png_structp);







extern void ( png_progressive_combine_row) (png_structp png_ptr, png_bytep old_row, png_const_bytep new_row)
                                                ;



extern __attribute__((__malloc__)) png_voidp ( png_malloc) (png_structp png_ptr, png_alloc_size_t size)

                  ;

extern __attribute__((__malloc__)) png_voidp ( png_calloc) (png_structp png_ptr, png_alloc_size_t size)

                  ;


extern __attribute__((__malloc__)) png_voidp ( png_malloc_warn) (png_structp png_ptr, png_alloc_size_t size)
                                          ;


extern void ( png_free) (png_structp png_ptr, png_voidp ptr);


extern void ( png_free_data) (png_structp png_ptr, png_infop info_ptr, png_uint_32 free_me, int num)
                                                                            ;



extern void ( png_data_freer) (png_structp png_ptr, png_infop info_ptr, int freer, png_uint_32 mask)
                                                                           ;
# 1948 "/usr/local/include/png.h" 3
extern __attribute__((__malloc__)) png_voidp ( png_malloc_default) (png_structp png_ptr, png_alloc_size_t size)
                                          ;
extern void ( png_free_default) (png_structp png_ptr, png_voidp ptr);




extern __attribute__((__noreturn__)) void ( png_error) (png_structp png_ptr, png_const_charp error_message)

                 ;


extern __attribute__((__noreturn__)) void ( png_chunk_error) (png_structp png_ptr, png_const_charp error_message)
                                                 ;
# 1970 "/usr/local/include/png.h" 3
extern void ( png_warning) (png_structp png_ptr, png_const_charp warning_message)
                                     ;


extern void ( png_chunk_warning) (png_structp png_ptr, png_const_charp warning_message)
                                     ;






extern void ( png_benign_error) (png_structp png_ptr, png_const_charp warning_message)
                                     ;



extern void ( png_chunk_benign_error) (png_structp png_ptr, png_const_charp warning_message)
                                     ;

extern void ( png_set_benign_errors) (png_structp png_ptr, int allowed)
                                       ;
# 2015 "/usr/local/include/png.h" 3
extern png_uint_32 ( png_get_valid) (png_const_structp png_ptr, png_const_infop info_ptr, png_uint_32 flag)

                      ;


extern png_size_t ( png_get_rowbytes) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;





extern png_bytepp ( png_get_rows) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;



extern void ( png_set_rows) (png_structp png_ptr, png_infop info_ptr, png_bytepp row_pointers)
                                                 ;



extern png_byte ( png_get_channels) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;



extern png_uint_32 ( png_get_image_width) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_uint_32 ( png_get_image_height) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_byte ( png_get_bit_depth) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;


extern png_byte ( png_get_color_type) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_byte ( png_get_filter_type) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_byte ( png_get_interlace_type) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_byte ( png_get_compression_type) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;


extern png_uint_32 ( png_get_pixels_per_meter) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_uint_32 ( png_get_x_pixels_per_meter) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_uint_32 ( png_get_y_pixels_per_meter) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;


extern float ( png_get_pixel_aspect_ratio) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_fixed_point ( png_get_pixel_aspect_ratio_fixed) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;


extern png_int_32 ( png_get_x_offset_pixels) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_int_32 ( png_get_y_offset_pixels) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_int_32 ( png_get_x_offset_microns) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;
extern png_int_32 ( png_get_y_offset_microns) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;




extern png_const_bytep ( png_get_signature) (png_const_structp png_ptr, png_infop info_ptr)
                                                    ;


extern png_uint_32 ( png_get_bKGD) (png_const_structp png_ptr, png_infop info_ptr, png_color_16p *background)

                               ;



extern void ( png_set_bKGD) (png_structp png_ptr, png_infop info_ptr, png_const_color_16p background)
                                    ;



extern png_uint_32 ( png_get_cHRM) (png_const_structp png_ptr, png_const_infop info_ptr, double *white_x, double *white_y, double *red_x, double *red_y, double *green_x, double *green_y, double *blue_x, double *blue_y)


                    ;
extern png_uint_32 ( png_get_cHRM_XYZ) (png_structp png_ptr, png_const_infop info_ptr, double *red_X, double *red_Y, double *red_Z, double *green_X, double *green_Y, double *green_Z, double *blue_X, double *blue_Y, double *blue_Z)


                                    ;

extern png_uint_32 ( png_get_cHRM_fixed) (png_const_structp png_ptr, png_const_infop info_ptr, png_fixed_point *int_white_x, png_fixed_point *int_white_y, png_fixed_point *int_red_x, png_fixed_point *int_red_y, png_fixed_point *int_green_x, png_fixed_point *int_green_y, png_fixed_point *int_blue_x, png_fixed_point *int_blue_y)





                                 ;

extern png_uint_32 ( png_get_cHRM_XYZ_fixed) (png_structp png_ptr, png_const_infop info_ptr, png_fixed_point *int_red_X, png_fixed_point *int_red_Y, png_fixed_point *int_red_Z, png_fixed_point *int_green_X, png_fixed_point *int_green_Y, png_fixed_point *int_green_Z, png_fixed_point *int_blue_X, png_fixed_point *int_blue_Y, png_fixed_point *int_blue_Z)





                                 ;



extern void ( png_set_cHRM) (png_structp png_ptr, png_infop info_ptr, double white_x, double white_y, double red_x, double red_y, double green_x, double green_y, double blue_x, double blue_y)


                                                  ;
extern void ( png_set_cHRM_XYZ) (png_structp png_ptr, png_infop info_ptr, double red_X, double red_Y, double red_Z, double green_X, double green_Y, double green_Z, double blue_X, double blue_Y, double blue_Z)


                                  ;
extern void ( png_set_cHRM_fixed) (png_structp png_ptr, png_infop info_ptr, png_fixed_point int_white_x, png_fixed_point int_white_y, png_fixed_point int_red_x, png_fixed_point int_red_y, png_fixed_point int_green_x, png_fixed_point int_green_y, png_fixed_point int_blue_x, png_fixed_point int_blue_y)




                                ;
extern void ( png_set_cHRM_XYZ_fixed) (png_structp png_ptr, png_infop info_ptr, png_fixed_point int_red_X, png_fixed_point int_red_Y, png_fixed_point int_red_Z, png_fixed_point int_green_X, png_fixed_point int_green_Y, png_fixed_point int_green_Z, png_fixed_point int_blue_X, png_fixed_point int_blue_Y, png_fixed_point int_blue_Z)




                                ;



extern png_uint_32 ( png_get_gAMA) (png_const_structp png_ptr, png_const_infop info_ptr, double *file_gamma)

                        ;
extern png_uint_32 ( png_get_gAMA_fixed) (png_const_structp png_ptr, png_const_infop info_ptr, png_fixed_point *int_file_gamma)

                                     ;



extern void ( png_set_gAMA) (png_structp png_ptr, png_infop info_ptr, double file_gamma)
                                           ;
extern void ( png_set_gAMA_fixed) (png_structp png_ptr, png_infop info_ptr, png_fixed_point int_file_gamma)
                                                        ;



extern png_uint_32 ( png_get_hIST) (png_const_structp png_ptr, png_const_infop info_ptr, png_uint_16p *hist)

                        ;



extern void ( png_set_hIST) (png_structp png_ptr, png_infop info_ptr, png_const_uint_16p hist)
                                                 ;


extern png_uint_32 ( png_get_IHDR) (png_structp png_ptr, png_infop info_ptr, png_uint_32 *width, png_uint_32 *height, int *bit_depth, int *color_type, int *interlace_method, int *compression_method, int *filter_method)


                                                                        ;

extern void ( png_set_IHDR) (png_structp png_ptr, png_infop info_ptr, png_uint_32 width, png_uint_32 height, int bit_depth, int color_type, int interlace_method, int compression_method, int filter_method)


                                                                     ;


extern png_uint_32 ( png_get_oFFs) (png_const_structp png_ptr, png_const_infop info_ptr, png_int_32 *offset_x, png_int_32 *offset_y, int *unit_type)

                                                                ;



extern void ( png_set_oFFs) (png_structp png_ptr, png_infop info_ptr, png_int_32 offset_x, png_int_32 offset_y, int unit_type)

                                                             ;



extern png_uint_32 ( png_get_pCAL) (png_const_structp png_ptr, png_const_infop info_ptr, png_charp *purpose, png_int_32 *X0, png_int_32 *X1, int *type, int *nparams, png_charp *units, png_charpp *params)



                                          ;



extern void ( png_set_pCAL) (png_structp png_ptr, png_infop info_ptr, png_const_charp purpose, png_int_32 X0, png_int_32 X1, int type, int nparams, png_const_charp units, png_charpp params)


                                                           ;



extern png_uint_32 ( png_get_pHYs) (png_const_structp png_ptr, png_const_infop info_ptr, png_uint_32 *res_x, png_uint_32 *res_y, int *unit_type)

                                                            ;



extern void ( png_set_pHYs) (png_structp png_ptr, png_infop info_ptr, png_uint_32 res_x, png_uint_32 res_y, int unit_type)

                                                         ;


extern png_uint_32 ( png_get_PLTE) (png_const_structp png_ptr, png_const_infop info_ptr, png_colorp *palette, int *num_palette)

                                           ;

extern void ( png_set_PLTE) (png_structp png_ptr, png_infop info_ptr, png_const_colorp palette, int num_palette)

                                               ;


extern png_uint_32 ( png_get_sBIT) (png_const_structp png_ptr, png_infop info_ptr, png_color_8p *sig_bit)

                           ;



extern void ( png_set_sBIT) (png_structp png_ptr, png_infop info_ptr, png_const_color_8p sig_bit)
                                                                          ;



extern png_uint_32 ( png_get_sRGB) (png_const_structp png_ptr, png_const_infop info_ptr, int *file_srgb_intent)
                                                     ;



extern void ( png_set_sRGB) (png_structp png_ptr, png_infop info_ptr, int srgb_intent)
                                                               ;
extern void ( png_set_sRGB_gAMA_and_cHRM) (png_structp png_ptr, png_infop info_ptr, int srgb_intent)
                                         ;



extern png_uint_32 ( png_get_iCCP) (png_const_structp png_ptr, png_const_infop info_ptr, png_charpp name, int *compression_type, png_bytepp profile, png_uint_32 *proflen)


                          ;



extern void ( png_set_iCCP) (png_structp png_ptr, png_infop info_ptr, png_const_charp name, int compression_type, png_const_bytep profile, png_uint_32 proflen)


                         ;



extern png_uint_32 ( png_get_sPLT) (png_const_structp png_ptr, png_const_infop info_ptr, png_sPLT_tpp entries)

                          ;



extern void ( png_set_sPLT) (png_structp png_ptr, png_infop info_ptr, png_const_sPLT_tp entries, int nentries)

                                             ;




extern png_uint_32 ( png_get_text) (png_const_structp png_ptr, png_const_infop info_ptr, png_textp *text_ptr, int *num_text)

                                        ;
# 2308 "/usr/local/include/png.h" 3
extern void ( png_set_text) (png_structp png_ptr, png_infop info_ptr, png_const_textp text_ptr, int num_text)

                                            ;



extern png_uint_32 ( png_get_tIME) (png_const_structp png_ptr, png_infop info_ptr, png_timep *mod_time)
                                                                         ;



extern void ( png_set_tIME) (png_structp png_ptr, png_infop info_ptr, png_const_timep mod_time)
                                                                        ;



extern png_uint_32 ( png_get_tRNS) (png_const_structp png_ptr, png_infop info_ptr, png_bytep *trans_alpha, int *num_trans, png_color_16p *trans_color)

                                                                        ;



extern void ( png_set_tRNS) (png_structp png_ptr, png_infop info_ptr, png_const_bytep trans_alpha, int num_trans, png_const_color_16p trans_color)


                                     ;



extern png_uint_32 ( png_get_sCAL) (png_const_structp png_ptr, png_const_infop info_ptr, int *unit, double *width, double *height)

                                              ;






extern png_uint_32 ( png_get_sCAL_fixed) (png_structp png_ptr, png_const_infop info_ptr, int *unit, png_fixed_point *width, png_fixed_point *height)


                             ;

extern png_uint_32 ( png_get_sCAL_s) (png_const_structp png_ptr, png_const_infop info_ptr, int *unit, png_charpp swidth, png_charpp sheight)

                                                      ;

extern void ( png_set_sCAL) (png_structp png_ptr, png_infop info_ptr, int unit, double width, double height)

                                           ;
extern void ( png_set_sCAL_fixed) (png_structp png_ptr, png_infop info_ptr, int unit, png_fixed_point width, png_fixed_point height)

                           ;
extern void ( png_set_sCAL_s) (png_structp png_ptr, png_infop info_ptr, int unit, png_const_charp swidth, png_const_charp sheight)

                                                               ;
# 2378 "/usr/local/include/png.h" 3
extern void ( png_set_keep_unknown_chunks) (png_structp png_ptr, int keep, png_const_bytep chunk_list, int num_chunks)

                                                ;




extern int ( png_handle_as_unknown) (png_structp png_ptr, png_const_bytep chunk_name)
                                ;


extern void ( png_set_unknown_chunks) (png_structp png_ptr, png_infop info_ptr, png_const_unknown_chunkp unknowns, int num_unknowns)

                      ;
extern void ( png_set_unknown_chunk_location) (png_structp png_ptr, png_infop info_ptr, int chunk, int location)
                                                                       ;
extern int ( png_get_unknown_chunks) (png_const_structp png_ptr, png_const_infop info_ptr, png_unknown_chunkpp entries)
                                                           ;






extern void ( png_set_invalid) (png_structp png_ptr, png_infop info_ptr, int mask)
                                                        ;



extern void ( png_read_png) (png_structp png_ptr, png_infop info_ptr, int transforms, png_voidp params)
                                      ;
extern void ( png_write_png) (png_structp png_ptr, png_infop info_ptr, int transforms, png_voidp params)
                                      ;


extern png_const_charp ( png_get_copyright) (png_const_structp png_ptr)
                                ;
extern png_const_charp ( png_get_header_ver) (png_const_structp png_ptr)
                                ;
extern png_const_charp ( png_get_header_version) (png_const_structp png_ptr)
                                ;
extern png_const_charp ( png_get_libpng_ver) (png_const_structp png_ptr)
                                ;


extern png_uint_32 ( png_permit_mng_features) (png_structp png_ptr, png_uint_32 mng_features_permitted)
                                        ;
# 2444 "/usr/local/include/png.h" 3
extern void ( png_set_user_limits) (png_structp png_ptr, png_uint_32 user_width_max, png_uint_32 user_height_max)
                                                             ;
extern png_uint_32 ( png_get_user_width_max) (png_const_structp png_ptr)
                                ;
extern png_uint_32 ( png_get_user_height_max) (png_const_structp png_ptr)
                                ;

extern void ( png_set_chunk_cache_max) (png_structp png_ptr, png_uint_32 user_chunk_cache_max)
                                      ;
extern png_uint_32 ( png_get_chunk_cache_max) (png_const_structp png_ptr)
                                ;

extern void ( png_set_chunk_malloc_max) (png_structp png_ptr, png_alloc_size_t user_chunk_cache_max)
                                           ;
extern png_alloc_size_t ( png_get_chunk_malloc_max) (png_const_structp png_ptr)
                                ;



extern png_uint_32 ( png_get_pixels_per_inch) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;

extern png_uint_32 ( png_get_x_pixels_per_inch) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;

extern png_uint_32 ( png_get_y_pixels_per_inch) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;

extern float ( png_get_x_offset_inches) (png_const_structp png_ptr, png_const_infop info_ptr)
                                                          ;

extern png_fixed_point ( png_get_x_offset_inches_fixed) (png_structp png_ptr, png_const_infop info_ptr)
                                                    ;


extern float ( png_get_y_offset_inches) (png_const_structp png_ptr, png_const_infop info_ptr)
                              ;

extern png_fixed_point ( png_get_y_offset_inches_fixed) (png_structp png_ptr, png_const_infop info_ptr)
                                                    ;



extern png_uint_32 ( png_get_pHYs_dpi) (png_const_structp png_ptr, png_const_infop info_ptr, png_uint_32 *res_x, png_uint_32 *res_y, int *unit_type)

                    ;





extern png_uint_32 ( png_get_io_state) (png_structp png_ptr);

extern __attribute__((__deprecated__)) png_const_bytep ( png_get_io_chunk_name) (png_structp png_ptr)
                                          ;
extern png_uint_32 ( png_get_io_chunk_type) (png_const_structp png_ptr)
                                ;
# 2619 "/usr/local/include/png.h" 3
extern png_uint_32 ( png_get_uint_32) (png_const_bytep buf);
extern png_uint_16 ( png_get_uint_16) (png_const_bytep buf);
extern png_int_32 ( png_get_int_32) (png_const_bytep buf);


extern png_uint_32 ( png_get_uint_31) (png_structp png_ptr, png_const_bytep buf)
                         ;




extern void ( png_save_uint_32) (png_bytep buf, png_uint_32 i);


extern void ( png_save_int_32) (png_bytep buf, png_int_32 i);







extern void ( png_save_uint_16) (png_bytep buf, unsigned int i);
# 2672 "/usr/local/include/png.h" 3
extern void ( png_set_check_for_invalid_index) (png_structp png_ptr, int allowed)
                 ;



extern png_uint_32 ( png_get_acTL) (png_structp png_ptr, png_infop info_ptr, png_uint_32 *num_frames, png_uint_32 *num_plays)
                                                                        ;

extern png_uint_32 ( png_set_acTL) (png_structp png_ptr, png_infop info_ptr, png_uint_32 num_frames, png_uint_32 num_plays)
                                                                      ;

extern png_uint_32 ( png_get_num_frames) (png_structp png_ptr, png_infop info_ptr)
                       ;

extern png_uint_32 ( png_get_num_plays) (png_structp png_ptr, png_infop info_ptr)
                       ;

extern png_uint_32 ( png_get_next_frame_fcTL) (png_structp png_ptr, png_infop info_ptr, png_uint_32 *width, png_uint_32 *height, png_uint_32 *x_offset, png_uint_32 *y_offset, png_uint_16 *delay_num, png_uint_16 *delay_den, png_byte *dispose_op, png_byte *blend_op)



                       ;

extern png_uint_32 ( png_set_next_frame_fcTL) (png_structp png_ptr, png_infop info_ptr, png_uint_32 width, png_uint_32 height, png_uint_32 x_offset, png_uint_32 y_offset, png_uint_16 delay_num, png_uint_16 delay_den, png_byte dispose_op, png_byte blend_op)



                      ;

extern png_uint_32 ( png_get_next_frame_width) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_32 ( png_get_next_frame_height) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_32 ( png_get_next_frame_x_offset) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_32 ( png_get_next_frame_y_offset) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_16 ( png_get_next_frame_delay_num) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_16 ( png_get_next_frame_delay_den) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_byte ( png_get_next_frame_dispose_op) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_byte ( png_get_next_frame_blend_op) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_byte ( png_get_first_frame_is_hidden) (png_structp png_ptr, png_infop info_ptr)
                                             ;
extern png_uint_32 ( png_set_first_frame_is_hidden) (png_structp png_ptr, png_infop info_ptr, png_byte is_hidden)
                                                                 ;


extern void ( png_read_frame_head) (png_structp png_ptr, png_infop info_ptr)
                       ;

extern void ( png_set_progressive_frame_fn) (png_structp png_ptr, png_progressive_frame_ptr frame_info_fn, png_progressive_frame_ptr frame_end_fn)

                                           ;




extern void ( png_write_frame_head) (png_structp png_ptr, png_infop info_ptr, png_bytepp row_pointers, png_uint_32 width, png_uint_32 height, png_uint_32 x_offset, png_uint_32 y_offset, png_uint_16 delay_num, png_uint_16 delay_den, png_byte dispose_op, png_byte blend_op)




                      ;

extern void ( png_write_frame_tail) (png_structp png_ptr, png_infop info_ptr)
                       ;
# 22 "fjpeg.c" 2




# 1 "/usr/local/include/jpeglib.h" 1 3
# 25 "/usr/local/include/jpeglib.h" 3
# 1 "/usr/local/include/jconfig.h" 1 3
# 26 "/usr/local/include/jpeglib.h" 2 3

# 1 "/usr/local/include/jmorecfg.h" 1 3
# 60 "/usr/local/include/jmorecfg.h" 3
typedef unsigned char JSAMPLE;
# 100 "/usr/local/include/jmorecfg.h" 3
typedef short JCOEF;
# 111 "/usr/local/include/jmorecfg.h" 3
typedef unsigned char JOCTET;
# 136 "/usr/local/include/jmorecfg.h" 3
typedef unsigned char UINT8;
# 148 "/usr/local/include/jmorecfg.h" 3
typedef unsigned short UINT16;







typedef short INT16;
# 165 "/usr/local/include/jmorecfg.h" 3
typedef long INT32;
# 178 "/usr/local/include/jmorecfg.h" 3
typedef unsigned int JDIMENSION;
# 239 "/usr/local/include/jmorecfg.h" 3
typedef int boolean;
# 28 "/usr/local/include/jpeglib.h" 2 3
# 73 "/usr/local/include/jpeglib.h" 3
typedef JSAMPLE *JSAMPROW;
typedef JSAMPROW *JSAMPARRAY;
typedef JSAMPARRAY *JSAMPIMAGE;

typedef JCOEF JBLOCK[64];
typedef JBLOCK *JBLOCKROW;
typedef JBLOCKROW *JBLOCKARRAY;
typedef JBLOCKARRAY *JBLOCKIMAGE;

typedef JCOEF *JCOEFPTR;







typedef struct {




  UINT16 quantval[64];





  boolean sent_table;
} JQUANT_TBL;




typedef struct {

  UINT8 bits[17];

  UINT8 huffval[256];





  boolean sent_table;
} JHUFF_TBL;




typedef struct {



  int component_id;
  int component_index;
  int h_samp_factor;
  int v_samp_factor;
  int quant_tbl_no;




  int dc_tbl_no;
  int ac_tbl_no;
# 146 "/usr/local/include/jpeglib.h" 3
  JDIMENSION width_in_blocks;
  JDIMENSION height_in_blocks;





  int DCT_h_scaled_size;
  int DCT_v_scaled_size;






  JDIMENSION downsampled_width;
  JDIMENSION downsampled_height;




  boolean component_needed;



  int MCU_width;
  int MCU_height;
  int MCU_blocks;
  int MCU_sample_width;
  int last_col_width;
  int last_row_height;





  JQUANT_TBL * quant_table;


  void * dct_table;
} jpeg_component_info;




typedef struct {
  int comps_in_scan;
  int component_index[4];
  int Ss, Se;
  int Ah, Al;
} jpeg_scan_info;



typedef struct jpeg_marker_struct * jpeg_saved_marker_ptr;

struct jpeg_marker_struct {
  jpeg_saved_marker_ptr next;
  UINT8 marker;
  unsigned int original_length;
  unsigned int data_length;
  JOCTET * data;

};



typedef enum {
 JCS_UNKNOWN,
 JCS_GRAYSCALE,
 JCS_RGB,
 JCS_YCbCr,
 JCS_CMYK,
 JCS_YCCK
} J_COLOR_SPACE;



typedef enum {
 JDCT_ISLOW,
 JDCT_IFAST,
 JDCT_FLOAT
} J_DCT_METHOD;
# 239 "/usr/local/include/jpeglib.h" 3
typedef enum {
 JDITHER_NONE,
 JDITHER_ORDERED,
 JDITHER_FS
} J_DITHER_MODE;
# 260 "/usr/local/include/jpeglib.h" 3
struct jpeg_common_struct {
  struct jpeg_error_mgr * err; struct jpeg_memory_mgr * mem; struct jpeg_progress_mgr * progress; void * client_data; boolean is_decompressor; int global_state;




};

typedef struct jpeg_common_struct * j_common_ptr;
typedef struct jpeg_compress_struct * j_compress_ptr;
typedef struct jpeg_decompress_struct * j_decompress_ptr;




struct jpeg_compress_struct {
  struct jpeg_error_mgr * err; struct jpeg_memory_mgr * mem; struct jpeg_progress_mgr * progress; void * client_data; boolean is_decompressor; int global_state;


  struct jpeg_destination_mgr * dest;






  JDIMENSION image_width;
  JDIMENSION image_height;
  int input_components;
  J_COLOR_SPACE in_color_space;

  double input_gamma;
# 301 "/usr/local/include/jpeglib.h" 3
  unsigned int scale_num, scale_denom;

  JDIMENSION jpeg_width;
  JDIMENSION jpeg_height;







  int data_precision;

  int num_components;
  J_COLOR_SPACE jpeg_color_space;

  jpeg_component_info * comp_info;


  JQUANT_TBL * quant_tbl_ptrs[4];
  int q_scale_factor[4];




  JHUFF_TBL * dc_huff_tbl_ptrs[4];
  JHUFF_TBL * ac_huff_tbl_ptrs[4];


  UINT8 arith_dc_L[16];
  UINT8 arith_dc_U[16];
  UINT8 arith_ac_K[16];

  int num_scans;
  const jpeg_scan_info * scan_info;





  boolean raw_data_in;
  boolean arith_code;
  boolean optimize_coding;
  boolean CCIR601_sampling;
  boolean do_fancy_downsampling;
  int smoothing_factor;
  J_DCT_METHOD dct_method;






  unsigned int restart_interval;
  int restart_in_rows;



  boolean write_JFIF_header;
  UINT8 JFIF_major_version;
  UINT8 JFIF_minor_version;




  UINT8 density_unit;
  UINT16 X_density;
  UINT16 Y_density;
  boolean write_Adobe_marker;






  JDIMENSION next_scanline;
# 385 "/usr/local/include/jpeglib.h" 3
  boolean progressive_mode;
  int max_h_samp_factor;
  int max_v_samp_factor;

  int min_DCT_h_scaled_size;
  int min_DCT_v_scaled_size;

  JDIMENSION total_iMCU_rows;
# 403 "/usr/local/include/jpeglib.h" 3
  int comps_in_scan;
  jpeg_component_info * cur_comp_info[4];


  JDIMENSION MCUs_per_row;
  JDIMENSION MCU_rows_in_scan;

  int blocks_in_MCU;
  int MCU_membership[10];



  int Ss, Se, Ah, Al;

  int block_size;
  const int * natural_order;
  int lim_Se;




  struct jpeg_comp_master * master;
  struct jpeg_c_main_controller * main;
  struct jpeg_c_prep_controller * prep;
  struct jpeg_c_coef_controller * coef;
  struct jpeg_marker_writer * marker;
  struct jpeg_color_converter * cconvert;
  struct jpeg_downsampler * downsample;
  struct jpeg_forward_dct * fdct;
  struct jpeg_entropy_encoder * entropy;
  jpeg_scan_info * script_space;
  int script_space_size;
};




struct jpeg_decompress_struct {
  struct jpeg_error_mgr * err; struct jpeg_memory_mgr * mem; struct jpeg_progress_mgr * progress; void * client_data; boolean is_decompressor; int global_state;


  struct jpeg_source_mgr * src;




  JDIMENSION image_width;
  JDIMENSION image_height;
  int num_components;
  J_COLOR_SPACE jpeg_color_space;






  J_COLOR_SPACE out_color_space;

  unsigned int scale_num, scale_denom;

  double output_gamma;

  boolean buffered_image;
  boolean raw_data_out;

  J_DCT_METHOD dct_method;
  boolean do_fancy_upsampling;
  boolean do_block_smoothing;

  boolean quantize_colors;

  J_DITHER_MODE dither_mode;
  boolean two_pass_quantize;
  int desired_number_of_colors;

  boolean enable_1pass_quant;
  boolean enable_external_quant;
  boolean enable_2pass_quant;







  JDIMENSION output_width;
  JDIMENSION output_height;
  int out_color_components;
  int output_components;



  int rec_outbuf_height;
# 507 "/usr/local/include/jpeglib.h" 3
  int actual_number_of_colors;
  JSAMPARRAY colormap;
# 518 "/usr/local/include/jpeglib.h" 3
  JDIMENSION output_scanline;




  int input_scan_number;
  JDIMENSION input_iMCU_row;





  int output_scan_number;
  JDIMENSION output_iMCU_row;
# 540 "/usr/local/include/jpeglib.h" 3
  int (*coef_bits)[64];
# 551 "/usr/local/include/jpeglib.h" 3
  JQUANT_TBL * quant_tbl_ptrs[4];


  JHUFF_TBL * dc_huff_tbl_ptrs[4];
  JHUFF_TBL * ac_huff_tbl_ptrs[4];






  int data_precision;

  jpeg_component_info * comp_info;


  boolean is_baseline;
  boolean progressive_mode;
  boolean arith_code;

  UINT8 arith_dc_L[16];
  UINT8 arith_dc_U[16];
  UINT8 arith_ac_K[16];

  unsigned int restart_interval;




  boolean saw_JFIF_marker;

  UINT8 JFIF_major_version;
  UINT8 JFIF_minor_version;
  UINT8 density_unit;
  UINT16 X_density;
  UINT16 Y_density;
  boolean saw_Adobe_marker;
  UINT8 Adobe_transform;

  boolean CCIR601_sampling;





  jpeg_saved_marker_ptr marker_list;
# 605 "/usr/local/include/jpeglib.h" 3
  int max_h_samp_factor;
  int max_v_samp_factor;

  int min_DCT_h_scaled_size;
  int min_DCT_v_scaled_size;

  JDIMENSION total_iMCU_rows;
# 620 "/usr/local/include/jpeglib.h" 3
  JSAMPLE * sample_range_limit;






  int comps_in_scan;
  jpeg_component_info * cur_comp_info[4];


  JDIMENSION MCUs_per_row;
  JDIMENSION MCU_rows_in_scan;

  int blocks_in_MCU;
  int MCU_membership[10];



  int Ss, Se, Ah, Al;



  int block_size;
  const int * natural_order;
  int lim_Se;





  int unread_marker;




  struct jpeg_decomp_master * master;
  struct jpeg_d_main_controller * main;
  struct jpeg_d_coef_controller * coef;
  struct jpeg_d_post_controller * post;
  struct jpeg_input_controller * inputctl;
  struct jpeg_marker_reader * marker;
  struct jpeg_entropy_decoder * entropy;
  struct jpeg_inverse_dct * idct;
  struct jpeg_upsampler * upsample;
  struct jpeg_color_deconverter * cconvert;
  struct jpeg_color_quantizer * cquantize;
};
# 680 "/usr/local/include/jpeglib.h" 3
struct jpeg_error_mgr {

  void (*error_exit) (j_common_ptr cinfo);

  void (*emit_message) (j_common_ptr cinfo, int msg_level);

  void (*output_message) (j_common_ptr cinfo);

  void (*format_message) (j_common_ptr cinfo, char * buffer);


  void (*reset_error_mgr) (j_common_ptr cinfo);




  int msg_code;

  union {
    int i[8];
    char s[80];
  } msg_parm;



  int trace_level;







  long num_warnings;
# 725 "/usr/local/include/jpeglib.h" 3
  const char * const * jpeg_message_table;
  int last_jpeg_message;



  const char * const * addon_message_table;
  int first_addon_message;
  int last_addon_message;
};




struct jpeg_progress_mgr {
  void (*progress_monitor) (j_common_ptr cinfo);

  long pass_counter;
  long pass_limit;
  int completed_passes;
  int total_passes;
};




struct jpeg_destination_mgr {
  JOCTET * next_output_byte;
  size_t free_in_buffer;

  void (*init_destination) (j_compress_ptr cinfo);
  boolean (*empty_output_buffer) (j_compress_ptr cinfo);
  void (*term_destination) (j_compress_ptr cinfo);
};




struct jpeg_source_mgr {
  const JOCTET * next_input_byte;
  size_t bytes_in_buffer;

  void (*init_source) (j_decompress_ptr cinfo);
  boolean (*fill_input_buffer) (j_decompress_ptr cinfo);
  void (*skip_input_data) (j_decompress_ptr cinfo, long num_bytes);
  boolean (*resync_to_restart) (j_decompress_ptr cinfo, int desired);
  void (*term_source) (j_decompress_ptr cinfo);
};
# 789 "/usr/local/include/jpeglib.h" 3
typedef struct jvirt_sarray_control * jvirt_sarray_ptr;
typedef struct jvirt_barray_control * jvirt_barray_ptr;


struct jpeg_memory_mgr {

  void * (*alloc_small) (j_common_ptr cinfo, int pool_id, size_t sizeofobject)
                         ;
  void * (*alloc_large) (j_common_ptr cinfo, int pool_id, size_t sizeofobject)
                              ;
  JSAMPARRAY (*alloc_sarray) (j_common_ptr cinfo, int pool_id, JDIMENSION samplesperrow, JDIMENSION numrows)

                             ;
  JBLOCKARRAY (*alloc_barray) (j_common_ptr cinfo, int pool_id, JDIMENSION blocksperrow, JDIMENSION numrows)

                              ;
  jvirt_sarray_ptr (*request_virt_sarray) (j_common_ptr cinfo, int pool_id, boolean pre_zero, JDIMENSION samplesperrow, JDIMENSION numrows, JDIMENSION maxaccess)




                              ;
  jvirt_barray_ptr (*request_virt_barray) (j_common_ptr cinfo, int pool_id, boolean pre_zero, JDIMENSION blocksperrow, JDIMENSION numrows, JDIMENSION maxaccess)




                              ;
  void (*realize_virt_arrays) (j_common_ptr cinfo);
  JSAMPARRAY (*access_virt_sarray) (j_common_ptr cinfo, jvirt_sarray_ptr ptr, JDIMENSION start_row, JDIMENSION num_rows, boolean writable)



                          ;
  JBLOCKARRAY (*access_virt_barray) (j_common_ptr cinfo, jvirt_barray_ptr ptr, JDIMENSION start_row, JDIMENSION num_rows, boolean writable)



                           ;
  void (*free_pool) (j_common_ptr cinfo, int pool_id);
  void (*self_destruct) (j_common_ptr cinfo);






  long max_memory_to_use;


  long max_alloc_chunk;
};





typedef boolean (*jpeg_marker_parser_method) (j_decompress_ptr cinfo);
# 926 "/usr/local/include/jpeglib.h" 3
extern struct jpeg_error_mgr * jpeg_std_error
 (struct jpeg_error_mgr * err);
# 942 "/usr/local/include/jpeglib.h" 3
extern void jpeg_CreateCompress (j_compress_ptr cinfo, int version, size_t structsize)
                                          ;
extern void jpeg_CreateDecompress (j_decompress_ptr cinfo, int version, size_t structsize)
                                     ;

extern void jpeg_destroy_compress (j_compress_ptr cinfo);
extern void jpeg_destroy_decompress (j_decompress_ptr cinfo);



extern void jpeg_stdio_dest (j_compress_ptr cinfo, FILE * outfile);
extern void jpeg_stdio_src (j_decompress_ptr cinfo, FILE * infile);


extern void jpeg_mem_dest (j_compress_ptr cinfo, unsigned char ** outbuffer, unsigned long * outsize)

                                   ;
extern void jpeg_mem_src (j_decompress_ptr cinfo, unsigned char * inbuffer, unsigned long insize)

                               ;


extern void jpeg_set_defaults (j_compress_ptr cinfo);

extern void jpeg_set_colorspace (j_compress_ptr cinfo, J_COLOR_SPACE colorspace)
                                    ;
extern void jpeg_default_colorspace (j_compress_ptr cinfo);
extern void jpeg_set_quality (j_compress_ptr cinfo, int quality, boolean force_baseline)
                               ;
extern void jpeg_set_linear_quality (j_compress_ptr cinfo, int scale_factor, boolean force_baseline)

                               ;
extern void jpeg_default_qtables (j_compress_ptr cinfo, boolean force_baseline)
                                   ;
extern void jpeg_add_quant_table (j_compress_ptr cinfo, int which_tbl, const unsigned int *basic_table, int scale_factor, boolean force_baseline)


                                   ;
extern int jpeg_quality_scaling (int quality);
extern void jpeg_simple_progression (j_compress_ptr cinfo);
extern void jpeg_suppress_tables (j_compress_ptr cinfo, boolean suppress)
                             ;
extern JQUANT_TBL * jpeg_alloc_quant_table (j_common_ptr cinfo);
extern JHUFF_TBL * jpeg_alloc_huff_table (j_common_ptr cinfo);


extern void jpeg_start_compress (j_compress_ptr cinfo, boolean write_all_tables)
                                    ;
extern JDIMENSION jpeg_write_scanlines (j_compress_ptr cinfo, JSAMPARRAY scanlines, JDIMENSION num_lines)

                                ;
extern void jpeg_finish_compress (j_compress_ptr cinfo);


extern void jpeg_calc_jpeg_dimensions (j_compress_ptr cinfo);


extern JDIMENSION jpeg_write_raw_data (j_compress_ptr cinfo, JSAMPIMAGE data, JDIMENSION num_lines)

                               ;


extern void jpeg_write_marker
 (j_compress_ptr cinfo, int marker, const JOCTET * dataptr, unsigned int datalen)
                                                    ;

extern void jpeg_write_m_header
 (j_compress_ptr cinfo, int marker, unsigned int datalen);
extern void jpeg_write_m_byte
 (j_compress_ptr cinfo, int val);


extern void jpeg_write_tables (j_compress_ptr cinfo);


extern int jpeg_read_header (j_decompress_ptr cinfo, boolean require_image)
                             ;
# 1030 "/usr/local/include/jpeglib.h" 3
extern boolean jpeg_start_decompress (j_decompress_ptr cinfo);
extern JDIMENSION jpeg_read_scanlines (j_decompress_ptr cinfo, JSAMPARRAY scanlines, JDIMENSION max_lines)

                               ;
extern boolean jpeg_finish_decompress (j_decompress_ptr cinfo);


extern JDIMENSION jpeg_read_raw_data (j_decompress_ptr cinfo, JSAMPIMAGE data, JDIMENSION max_lines)

                              ;


extern boolean jpeg_has_multiple_scans (j_decompress_ptr cinfo);
extern boolean jpeg_start_output (j_decompress_ptr cinfo, int scan_number)
                            ;
extern boolean jpeg_finish_output (j_decompress_ptr cinfo);
extern boolean jpeg_input_complete (j_decompress_ptr cinfo);
extern void jpeg_new_colormap (j_decompress_ptr cinfo);
extern int jpeg_consume_input (j_decompress_ptr cinfo);
# 1057 "/usr/local/include/jpeglib.h" 3
extern void jpeg_core_output_dimensions (j_decompress_ptr cinfo);
extern void jpeg_calc_output_dimensions (j_decompress_ptr cinfo);


extern void jpeg_save_markers
 (j_decompress_ptr cinfo, int marker_code, unsigned int length_limit)
                                 ;


extern void jpeg_set_marker_processor
 (j_decompress_ptr cinfo, int marker_code, jpeg_marker_parser_method routine)
                                         ;


extern jvirt_barray_ptr * jpeg_read_coefficients (j_decompress_ptr cinfo);
extern void jpeg_write_coefficients (j_compress_ptr cinfo, jvirt_barray_ptr * coef_arrays)
                                       ;
extern void jpeg_copy_critical_parameters (j_decompress_ptr srcinfo, j_compress_ptr dstinfo)
                              ;







extern void jpeg_abort_compress (j_compress_ptr cinfo);
extern void jpeg_abort_decompress (j_decompress_ptr cinfo);




extern void jpeg_abort (j_common_ptr cinfo);
extern void jpeg_destroy (j_common_ptr cinfo);


extern boolean jpeg_resync_to_restart (j_decompress_ptr cinfo, int desired)
                      ;
# 27 "fjpeg.c" 2






int jqual = 100;
# 44 "fjpeg.c"
int ualoop = 1;


int overwrite_mode = 1;


extern unsigned long asmf1(unsigned long);
extern unsigned long asmf2(unsigned long, unsigned long);
extern unsigned long asmf3(unsigned long, unsigned long, unsigned long);


extern void loop_asm(int, int, int, int, int, int, void*, void*);


extern void compute_asm(void* pix, void* tab, int x, int y);


void translate_file(int n, unsigned long*** iv, unsigned long** ov, int x, int y, int ct, int nt, int udfmode);

typedef struct _BMPTag
{
 char ident[2];
 int fsize;
 int dummy;
 int offset;
 int dummy2;
 int bm_x;
 int bm_y;
 short planes;
 short bpp;
 int compress;
 int nbytes;
 int no_matter[4];
} BMPTag;


struct my_error_mgr
{
 struct jpeg_error_mgr pub;
 jmp_buf setjmp_buffer;
};

typedef struct my_error_mgr * my_error_ptr;

static my_error_ptr errptr = ((void *)0);

static void my_error_exit (j_common_ptr cinfo)
{
 my_error_ptr myerr = (my_error_ptr) cinfo->err;
 (*cinfo->err->output_message) (cinfo);
 longjmp(myerr->setjmp_buffer, 1);
}


typedef struct _thread_args
{
    int n, ocx, ocy, ct, nt, udfmode;
    unsigned long ***bits, **obits;
} thread_args;

typedef struct _img_cache
{
    char* fn;
    unsigned long** bits;
    int x, y;

} img_cache;

img_cache* icache;
int ncache;

void alloc_cache(int n)
{

    ncache = 0;
    icache = (img_cache*)malloc(n*sizeof(img_cache));
}

int lookup_cache(char* fn, unsigned long*** bits, int* x, int* y)
{
    int i;

    for (i=0;i<ncache;i++)
    {
 if (strcmp(fn, icache[i].fn) == 0)
 {



     *bits = icache[i].bits;
     *x = icache[i].x;
     *y = icache[i].y;

     return 0;
 }
    }


    return 1;
}

void insert_cache(char* fn, unsigned long** bits, int x, int y)
{
    icache[ncache].fn = malloc((strlen(fn)+1)*sizeof(char));

    strcpy(icache[ncache].fn, fn);
    icache[ncache].x = x;
    icache[ncache].y = y;
    icache[ncache].bits = bits;

    ncache ++;

}


int fmmf(FILE* fp, void** op, off_t* siz)
{
    struct stat sb;
    int fd;
    void* p;

    *op = ((void *)0);
    *siz = 0;


    fd = (!__isthreaded ? ((fp)->_file) : (fileno)(fp));
    if (fstat(fd, &sb) < 0)
    {
 perror("fstat");
 return 1;
    }

    p = mmap(0, sb.st_size, 0x01, 0x0002 , fd, 0);
    if (p == ((void *)-1))
    {
 perror ("mmap");
        return 2;
    }





    *op = p;
    *siz = sb.st_size;

    return 0;
}


__inline unsigned long RGB(int r, int g, int b)
{
    return (r << 0x10) + (g << 0x8) + b;
}

__inline void dRGB(unsigned char* r, unsigned char* g, unsigned char* b, unsigned long v)
{
    *r = (v & 0xff0000) >> 0x10;
    *g = (v & 0xff00) >> 0x8;
    *b = v & 0xff;
}


void set_jpeg_rows_array(int cur_row, int n_rows, JSAMPARRAY pixel_data, int width, unsigned long** bits, int gs)
{
 JSAMPROW ptr;
 register volatile int i, j, r;

 if (gs)
 {
     for (i=0;i<n_rows;i++)
     {
         ptr = pixel_data[i];
         for (j=0;j<width;j++)
         {
      r = ((int) (*ptr++));
      bits[cur_row-i][j] = (r << 0x10) + (r << 0x8) + r;
         }
     }
 }
 else
 {
     for (i=0;i<n_rows;i++)
     {
         ptr = pixel_data[i];
         for (j=0;j<width;j++)
         {
      r = ((int) (*ptr++)) << 0x10;
      r += ((int) (*ptr++)) << 0x8;
      bits[cur_row-i][j] = r + ((int) (*ptr++));
         }
     }
 }
}

void set_jpeg_rows(int cur_row, JSAMPARRAY pixel_data, int width, unsigned long*** bits)
{
 JSAMPROW ptr;
 register volatile int j;
 register volatile int r, g, b;
 ptr = pixel_data[0];
 printf("slow\n");
 for (j=0;j<width;j++)
   {
    r=((int) (*ptr++));
    g=((int) (*ptr++));
    b=((int) (*ptr++));
    (*bits)[cur_row][j] = RGB(r,g,b);
    }
}




void set_pngrow_pointers(int x, int y, png_bytep* rows, unsigned long** bits)
{
  register volatile int i, j, i2;
  png_byte* row;

 i2 = y;
  for (i=0;i<y;i++)
  {
  i2 --;
       row = rows[i];
       for (j=0;j<x;j++)
       {
          row[j*3+2] = (bits[i2][j] & 0xff);
          row[j*3+1] = (bits[i2][j] & 0xff00) >> 0x8;
          row[j*3] = (bits[i2][j] & 0xff0000) >> 0x10;
# 281 "fjpeg.c"
       }
  }
}


void set_pngrows_array(int x, int y, png_bytep* rows, unsigned long** bits, int dim)
{
 register volatile int i, j, r, i2;
 png_byte* row;

 i2 = y;
 if (dim == 4)
 {
  for (i=0;i<y;i++)
  {
      i2 --;
       row = rows[i];
       for (j=0;j<x;j++)
       {
    r = (row[(j<<2)] & 0xff) << 0x10;
    r += (row[(j<<2)+1] & 0xff) << 0x8;
    r += row[(j<<2)+2] & 0xff;
    bits[i2][j] = r;
       }
  }
 }
 else if (dim == 3)
 {
  for (i=0;i<y;i++)
  {
      i2 --;
       row = rows[i];
       for (j=0;j<x;j++)
       {
    r = (row[3*j] & 0xff) << 0x10;
    r += (row[3*j+1] & 0xff) << 0x8;
    r += row[3*j+2] & 0xff;
    bits[i2][j] = r;

       }
  }
 }
 else if (dim == 1)
 {
  for (i=0;i<y;i++)
  {
      i2 --;
       row = rows[i];
       for (j=0;j<x;j++)
       {
    r = row[j] & 0xff;
    bits[i2][j] = (r << 0x10) + (r << 0x8) + r;

       }
  }
 }
# 353 "fjpeg.c"
}


void init_bmp(BMPTag* b)
{
  int i;
  b->ident[0]='B';
  b->ident[1]='M';
  b->fsize=0;
  b->dummy=0;
  b->offset=sizeof(BMPTag);
  b->bm_x=b->bm_y=0x20;
  b->dummy2=40;
  b->bpp=0x18;
  b->planes=1;
  b->compress=0;
  b->nbytes=3*32*32;
  for (i=0;i<4;i++) b->no_matter[i]=0;
}

int load_bmp_file(unsigned long*** bits, int* x, int* y, char* file_name)
{
 BMPTag bm_handle;
 int i, j, width, height, bpp;
 unsigned char r,g,b,a;
 FILE* plik;
 void* mem;
 unsigned char* mbuf;

 off_t siz;



 if (lookup_cache(file_name, bits, x, y) == 0) return 0;

 plik = fopen(file_name, "rb");
 if (!plik)
 {
     printf("load_bmp: cannot open: %s\n", file_name);
     return 1;
 }

 mem = ((void *)0);

 if (fmmf(plik, &mem, &siz) != 0) printf("load_bmp: warning: mmap file failed, using normal buffered I/O: %s\n", file_name);


 init_bmp(&bm_handle);

 i = fscanf(plik,"%c%c",&r,&g);
 if (i != 2)
 {
  printf("load_bmp: file %s is truncated, skipping\n", file_name);

  if (mem) munmap(mem, siz);

  fclose(plik);
  return 2;
 }

 if ((r != 'B' || g != 'M'))
 {
  printf("load_bmp: file %s doesn't start with BM - not recognized as a bitmap\n", file_name);

  if (mem) munmap(mem, siz);

  fclose(plik);
  return 3;
 }

 fread(&bm_handle.fsize,4,1,plik);
 fread(&bm_handle.dummy,4,1,plik);
 fread(&bm_handle.offset,4,1,plik);
 fread(&bm_handle.dummy2,4,1,plik);
 fread(&bm_handle.bm_x,4,1,plik);
 fread(&bm_handle.bm_y,4,1,plik);
 fread(&bm_handle.planes,2,1,plik);
 fread(&bm_handle.bpp,2,1,plik);
 bpp = bm_handle.bpp;

 if (bpp != 8 && bpp != 24 && bpp != 32)
 {
  printf("Only 8,24,32 BPP BMPs suported: current bpp: %d\n", bm_handle.bpp);

  if (mem) munmap(mem, siz);

  fclose(plik);
  return 4;
 }

 fseek(plik,bm_handle.offset,0);

 width = bm_handle.bm_x;
 height = bm_handle.bm_y;

 *bits = (unsigned long**)calloc(height, sizeof(unsigned long*));
 for (i=0;i<height;i++) (*bits)[i] = (unsigned long*)calloc(width, sizeof(unsigned long));

 mbuf = (unsigned char*)mem;

 if (mbuf)
 {

        fclose(plik);
 plik = ((void *)0);
        mbuf += bm_handle.offset;

  if (bpp == 8)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
    r = *mbuf++;
     (*bits)[i][j] = (r << 0x10) + (r << 0x8) + r;
        }
  }
  }
  else if (bpp == 24)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
    b = *mbuf++;
    g = *mbuf++;
    r = *mbuf++;
     (*bits)[i][j] = (r << 0x10) + (g << 0x8) + b;
        }
  }
  }
  else if (bpp == 32)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
    mbuf++;
    b = *mbuf++;
    g = *mbuf++;
    r = *mbuf++;
     (*bits)[i][j] = (r << 0x10) + (g << 0x8) + b;
        }
  }
  }
 }
 else
 {
  if (bpp == 8)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
            fscanf(plik,"%c", &r);
     (*bits)[i][j] = (r << 0x10) + (r << 0x8) + r;
        }
  }
  }
  else if (bpp == 24)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
            fscanf(plik,"%c%c%c", &b,&g,&r);
     (*bits)[i][j] = (r << 0x10) + (g << 0x8) + b;
        }
  }
  }
  else if (bpp == 32)
  {
   for (i=0;i<height;i++)
   {
        for (j=0;j<width;j++)
        {
            fscanf(plik,"%c%c%c%c", &a,&b,&g,&r);
     (*bits)[i][j] = (r << 0x10) + (g << 0x8) + b;
        }
  }
  }

 fclose(plik);
 }

 *x = width;
 *y = height;


 if (mem) munmap(mem, siz);

 insert_cache(file_name, *bits, *x, *y);

 return 0;

}


int load_png_file(unsigned long*** bits, int* x, int* y, char* file_name)
{
 int i, width, height, dim;
 png_byte ct ;
 void* mem;
 png_structp png_ptr;
 png_infop info_ptr;

 png_bytep* row_pointers;

 off_t siz;

        png_byte header[8];
 FILE* fp;

        if (lookup_cache(file_name, bits, x, y) == 0) return 0;


        fp = fopen(file_name, "rb");
        if (!fp)
 {
                printf("pngio: file %s could not be opened for reading", file_name);
  return 1;
 }

 mem = ((void *)0);

        if (fmmf(fp, &mem, &siz) != 0) printf("load_png: warning: mmap file failed, using normal buffered I/O: %s\n", file_name);


        fread(header, 1, 8, fp);
        if (png_sig_cmp(header, 0, 8))
 {
                printf("pngio: File %s is not recognized as a PNG file", file_name);

   if (mem) munmap(mem, siz);

  fclose(fp);
  return 2;
 }


        png_ptr = png_create_read_struct("1.5.12", ((void *)0), ((void *)0), ((void *)0));

        if (!png_ptr)
 {
                printf("pngio: png_create_read_struct failed");

   if (mem) munmap(mem, siz);

  fclose(fp);
  return 3;
 }

        info_ptr = png_create_info_struct(png_ptr);
        if (!info_ptr)
 {
                printf("pngio: png_create_info_struct failed");

   if (mem) munmap(mem, siz);

  fclose(fp);
  return 4;
 }

        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: error during init_io");

   if (mem) munmap(mem, siz);

  fclose(fp);
  return 5;
 }

        png_init_io(png_ptr, fp);
        png_set_sig_bytes(png_ptr, 8);

        png_read_info(png_ptr, info_ptr);

        width = png_get_image_width(png_ptr, info_ptr);
        height = png_get_image_height(png_ptr, info_ptr);
        ct = png_get_color_type(png_ptr, info_ptr);



        png_read_update_info(png_ptr, info_ptr);



        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: error during read_image");

   if (mem) munmap(mem, siz);

  fclose(fp);
  return 6;
 }

        if (ct == (2))
 {
     dim = 3;
 }
 else if (ct == (2 | 4))
 {
     dim = 4;
 }
 else if (ct == 0)
 {
     dim = 1;
 }
 else
 {
     printf("pngio: unsupported color type: %d\n", ct);

     if (mem) munmap(mem, siz);

     fclose(fp);
     return 7;
 }


        row_pointers = (png_bytep*)malloc(sizeof(png_bytep) * height);
        for (i=0;i<height;i++)
 {

                row_pointers[i] = (png_byte*)malloc(sizeof(png_byte) * width * dim);
 }

        png_read_image(png_ptr, row_pointers);
        fclose(fp);

 *x = width;
 *y = height;

 *bits = (unsigned long**)calloc(*y, sizeof(unsigned long*));
 for (i=0;i<height;i++) (*bits)[i] = (unsigned long*)calloc(*x, sizeof(unsigned long));

 set_pngrows_array(*x, *y, row_pointers, *bits, dim);

        for (i=0;i<height;i++) free(row_pointers[i]);
        free(row_pointers);


 if (mem) munmap(mem, siz);

        insert_cache(file_name, *bits, *x, *y);

 return 0;
}


int save_bmp_file(unsigned long** bits, int x, int y, char* file_name)
{
 BMPTag bm_handle;
 FILE* plik;
 int i, j;
 unsigned char r, g, b;

 init_bmp(&bm_handle);

 plik = fopen(file_name, "wb");
 if (!plik)
 {
     printf("save_bmp: error writing file: %s\n", file_name);
     return 1;
 }

 fprintf(plik,"%c%c", 'B','M');

 bm_handle.bm_y = y;
 bm_handle.bm_x = x;
 bm_handle.fsize = sizeof(BMPTag)+(y*x*3);

 fwrite(&bm_handle.fsize,4,1,plik);
 fwrite(&bm_handle.dummy,4,1,plik);

 bm_handle.offset=sizeof(BMPTag);
 bm_handle.planes=1;
 bm_handle.bpp=24;
 bm_handle.nbytes = x*y*3;

 fwrite(&bm_handle.offset,4,1,plik);
 fwrite(&bm_handle.dummy2,4,1,plik);
 fwrite(&bm_handle.bm_x,4,1,plik);
 fwrite(&bm_handle.bm_y,4,1,plik);
 fwrite(&bm_handle.planes,2,1,plik);
 fwrite(&bm_handle.bpp,2,1,plik);
 fwrite(&bm_handle.compress,4,1,plik);
 fwrite(&bm_handle.nbytes,4,1,plik);
 for (i=0;i<4;i++) fwrite(&bm_handle.no_matter[i],4,1,plik);

 fseek(plik,bm_handle.offset,0);
 for (i=0;i<y;i++) for (j=0;j<x;j++)
 {
       r = (bits[i][j] & 0xff0000) >> 0x10;
       g = (bits[i][j] & 0xff00) >> 0x8;
       b = bits[i][j] & 0xff;
       fprintf(plik,"%c%c%c", b, g, r);
 }

 fclose(plik);
 return 0;
}


int save_png_file(unsigned long** bits, int x, int y, char* file_name)
{
 png_structp png_ptr;
 png_infop info_ptr;
 FILE* fp;
 int i, width, height, dim;
 png_byte color_type, bit_depth;
 png_bytep* row_pointers;


        fp = fopen(file_name, "wb");
        if (!fp)
 {
                printf("pngio: File %s could not be opened for writing", file_name);
  return 1;
 }


        png_ptr = png_create_write_struct("1.5.12", ((void *)0), ((void *)0), ((void *)0));

        if (!png_ptr)
 {
                printf("pngio: png_create_write_struct failed");
  fclose(fp);
  return 2;
 }

        info_ptr = png_create_info_struct(png_ptr);
        if (!info_ptr)
 {
                printf("pngio: png_create_info_struct failed");
  fclose(fp);
  return 3;
 }

        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: Error during init_io");
  fclose(fp);
  return 4;
 }

        png_init_io(png_ptr, fp);


        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: Error during writing header");
  fclose(fp);
  return 5;
 }

 width = x;
 height = y;
 bit_depth = 8;
 color_type = (2);
 dim = 3;

        png_set_IHDR(png_ptr, info_ptr, width, height,
                     bit_depth, color_type, 0,
                     0, 0);

        png_write_info(png_ptr, info_ptr);


        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: Error during writing bytes");
  fclose(fp);
  return 6;
 }

        row_pointers = (png_bytep*)malloc(sizeof(png_bytep) * height);
        for (i=0;i<height;i++)
 {
                row_pointers[i] = (png_byte*)malloc(sizeof(png_byte) * (width + 9) * dim);
 }

 set_pngrow_pointers(x, y, row_pointers, bits);

        png_write_image(png_ptr, row_pointers);


        if (setjmp((*png_set_longjmp_fn((png_ptr), longjmp, sizeof (jmp_buf)))))
 {
                printf("pngio: Error during end of write");
  fclose(fp);
  return 7;
 }

        png_write_end(png_ptr, ((void *)0));


        for (i=0;i<height;i++) free(row_pointers[i]);
        free(row_pointers);

        fclose(fp);

 return 0;
}




int load_jpeg_file(unsigned long*** bits, int* x, int* y, char* filename)
{
    struct jpeg_decompress_struct cinfo;
    struct my_error_mgr jerr;
    FILE* infile;
    JSAMPARRAY buffer;
    int row_stride;
    int i, l, gs;
    void* mem;
    off_t siz;

    if (lookup_cache(filename, bits, x, y) == 0) return 0;

    if ((infile = fopen(filename, "rb")) == ((void *)0)) return 1;

    mem = ((void *)0);

    if (fmmf(infile, &mem, &siz) != 0) printf("load_jpg: warning: mmap file failed, using normal buffered I/O: %s\n", filename);




    cinfo.err = jpeg_std_error(&jerr.pub);
    jerr.pub.error_exit = my_error_exit;
    errptr = &jerr;
    if (setjmp(jerr.setjmp_buffer))
       {
 jpeg_destroy_decompress(&cinfo);

 if (mem) munmap(mem, siz);

 fclose(infile);
 printf("setjmp error\n");
 return 2;
       }
    jpeg_CreateDecompress((&cinfo), 80, (size_t) sizeof(struct jpeg_decompress_struct));

    if (mem)
    {

 jpeg_mem_src(&cinfo, (unsigned char*)mem, (unsigned long)siz);
 fclose(infile);
 infile = ((void *)0);
    }
    else
    {
     jpeg_stdio_src(&cinfo, infile);
    }
    jpeg_read_header(&cinfo, 1);
    gs = 0;
    if (cinfo.jpeg_color_space == JCS_GRAYSCALE)
       {
 gs = 1;






       }
    else cinfo.quantize_colors = 0;
    jpeg_start_decompress(&cinfo);







    *x = cinfo.output_width;
    *y = cinfo.output_height;
    *bits = (unsigned long**)calloc(*y, sizeof(unsigned long*));
    for (i=0;i<*y;i++) (*bits)[i] = (unsigned long*)calloc(*x, sizeof(unsigned long));
    row_stride = cinfo.output_width * cinfo.output_components;
# 947 "fjpeg.c"
    buffer = (*cinfo.mem->alloc_sarray)((j_common_ptr) &cinfo, 1, row_stride, 0x20);
    i = (*y)-1;
    while (cinfo.output_scanline < cinfo.output_height)
       {
    l = jpeg_read_scanlines(&cinfo, buffer, 0x20);
    set_jpeg_rows_array(i, l, buffer,*x, *bits, gs);
    i-=l;

       }


    jpeg_finish_decompress(&cinfo);
    jpeg_destroy_decompress(&cinfo);


    if (mem) munmap(mem, siz);

    insert_cache(filename, *bits, *x, *y);

    if (infile) fclose(infile);
    return 0;
}


void compute_pixels(unsigned char* pix, unsigned long** tab, int x, int y)
{
 register volatile int i,j, i2;
 unsigned char col[3];

 i2 = y;
 for (i=0;i<y;i++)
 {
     i2 --;
     for (j=0;j<x;j++)
     {

        dRGB(&col[0], &col[1], &col[2], tab[i][j]);
     pix[3*(x*i2+j)] = col[0];
 pix[3*(x*i2+j)+1] = col[1];
 pix[3*(x*i2+j)+2] = col[2];
     }
 }
}

void init_pixels(unsigned char** pix, unsigned long** tab, int x, int y)
{
    *pix = (unsigned char*)malloc((x*y*3+9)*sizeof(unsigned char));

    if (ualoop)
    {


 compute_asm(*pix, tab, x, y);
    }
    else
    {
        compute_pixels(*pix, tab, x, y);
    }



}

void free_pixels(unsigned char** pix)
{
 free(*pix);
 *pix = ((void *)0);
}


int save_jpeg_file(unsigned long** tab, int x, int y, char* filename)
{
 struct jpeg_compress_struct cinfo;
 struct my_error_mgr jerr;
 unsigned char* pixels;
 JSAMPROW* row_pointer;
 int row_stride, i;
 FILE* outfile;
 pixels = ((void *)0);

 if ((outfile = fopen(filename, "wb")) == ((void *)0)) return 5;

 init_pixels(&pixels, tab, x, y);
 cinfo.err = jpeg_std_error(&jerr.pub);
 jerr.pub.error_exit = my_error_exit;
 errptr = &jerr;
 if (setjmp(jerr.setjmp_buffer))
 {
 jpeg_destroy_compress(&cinfo);
 fclose(outfile);
 return 2;
 }
 jpeg_CreateCompress((&cinfo), 80, (size_t) sizeof(struct jpeg_compress_struct));
 jpeg_stdio_dest(&cinfo, outfile);
 cinfo.image_width = x;
 cinfo.image_height = y;
 cinfo.input_components = 3;
 cinfo.in_color_space = JCS_RGB;

 jpeg_set_defaults(&cinfo);
 jpeg_set_quality(&cinfo, jqual, 0);
 jpeg_start_compress(&cinfo, 1);

 row_stride = x*3;
 row_pointer = (JSAMPROW*)malloc(y*sizeof(JSAMPROW));
 for (i=0;i<y;i++) row_pointer[i] = &pixels[row_stride*i];
 i = jpeg_write_scanlines(&cinfo, row_pointer, y);
 if (i < y)
 {
     printf("Failed to write jpeg scanlines: written: %d/%d\n", i, y);
     fclose(outfile);
     return 1;
 }

 jpeg_finish_compress(&cinfo);
 jpeg_destroy_compress(&cinfo);



 fclose(outfile);



 return 0;
}

int save_jpeg_file_old(unsigned long** tab, int x, int y, char* filename)
{
 struct jpeg_compress_struct cinfo;
 struct my_error_mgr jerr;
 unsigned char* pixels;
 JSAMPROW row_pointer[1];
 int row_stride;
 FILE* outfile;
 pixels = ((void *)0);

 if ((outfile = fopen(filename, "wb")) == ((void *)0)) return 5;

 init_pixels(&pixels, tab, x, y);
 cinfo.err = jpeg_std_error(&jerr.pub);
 jerr.pub.error_exit = my_error_exit;
 errptr = &jerr;
 if (setjmp(jerr.setjmp_buffer))
 {
 jpeg_destroy_compress(&cinfo);
 fclose(outfile);
 return 2;
 }
 jpeg_CreateCompress((&cinfo), 80, (size_t) sizeof(struct jpeg_compress_struct));
 jpeg_stdio_dest(&cinfo, outfile);
 cinfo.image_width = x;
 cinfo.image_height = y;
 cinfo.input_components = 3;
 cinfo.in_color_space = JCS_RGB;

 jpeg_set_defaults(&cinfo);
 jpeg_set_quality(&cinfo, jqual, 0);
 jpeg_start_compress(&cinfo, 1);

 row_stride = x*3;
 while (cinfo.next_scanline < cinfo.image_height)
   {
    row_pointer[0] = &pixels[cinfo.next_scanline * row_stride];
    jpeg_write_scanlines(&cinfo, row_pointer, 1);
   }
 jpeg_finish_compress(&cinfo);
 jpeg_destroy_compress(&cinfo);


 fclose(outfile);
 return 0;
}



void translate_file(int n, unsigned long*** iv, unsigned long** ov, int x, int y, int ct, int nt, int udfmode)
{
     register volatile int i, j;
     int z, pi, pj, ni, nj;



     double **yv, xv;

     struct timeval at1, at2, atuse;


     if (udfmode)
     {

  if (ualoop && (udfmode == 4 || udfmode == 11 || udfmode == 12))
  {





          gettimeofday(&at1, ((void *)0));
      loop_asm(udfmode, n, x, y, ct, nt, (void*)iv, (void*)ov);
          gettimeofday(&at2, ((void *)0));

             do { (&atuse)->tv_sec = (&at2)->tv_sec - (&at1)->tv_sec; (&atuse)->tv_usec = (&at2)->tv_usec - (&at1)->tv_usec; if ((&atuse)->tv_usec < 0) { (&atuse)->tv_sec--; (&atuse)->tv_usec += 1000000; } } while (0);

             printf("%d.%06ds ", (int)atuse.tv_sec, (int)atuse.tv_usec);
# 1159 "fjpeg.c"
      return;
  }


  z = (x + y) >> 1;

         for (i=ct;i<y;i+=nt)
         {
# 1178 "fjpeg.c"
      if (udfmode == 4)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = asmf1(iv[0][i][j]);
                 }
      }
      else if (udfmode == 11)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = asmf2(iv[0][i][j], iv[1][i][j]);
                 }
      }
      else if (udfmode == 12)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = asmf3(iv[0][i][j], iv[1][i][j], iv[2][i][j]);
                 }
      }
      else if (udfmode == 1)



      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = (unsigned long)udf1(iv[0][i][j]);
                 }
      }
      else if (udfmode == 2)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = (unsigned long)udf2(iv[0][i][j], iv[1][i][j]);
                 }
      }
      else if (udfmode == 3)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = (unsigned long)udf3(iv[0][i][j], iv[1][i][j], iv[2][i][j]);
                 }
      }
      else if (udfmode == 5)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = udfi1(iv[0][i][j]);
                 }
      }
      else if (udfmode == 6)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = udfi2(iv[0][i][j], iv[1][i][j]);
                 }
      }
      else if (udfmode == 7)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = udfi3(iv[0][i][j], iv[1][i][j], iv[2][i][j]);
                 }
      }
      else if (udfmode == 8)
      {
   if (i > 0) pi = i - 1;
   else pi = y - 1;

                 for (j=0;j<x;j++)
                 {
       if (j > 0) pj = j - 1;
       else pj = x - 1;

              ov[i][j] = udfi2(iv[0][i][j], iv[0][pi][pj]);
                 }
      }
      else if (udfmode == 9)
      {
   if (i > 0) pi = i - 1;
   else pi = y - 1;

                 for (j=0;j<x;j++)
                 {
       if (j > 0) pj = j - 1;
       else pj = x - 1;

              ov[i][j] = udfi3(iv[0][i][j], iv[0][pi][pj], z);
                 }
      }
      else if (udfmode == 10)
      {
                 for (j=0;j<x;j++)
                 {
              ov[i][j] = udfi6(iv[0][i][j], iv[1][i][j], iv[2][i][j], iv[3][i][j], iv[4][i][j], iv[5][i][j]);
                 }
      }
         }
# 1288 "fjpeg.c"
  return;
     }

     yv = (double**)malloc(9 * sizeof(double*));
     for (i=0;i<9;i++) yv[i] = (double*)malloc((n+1) * sizeof(double));
     xv = (double)n;

     yv[0][n] = (double)(rand() % 0x1000000);

     yv[2][n] = (double)x;
     yv[4][n] = (double)y;
     yv[5][n] = (double)ct;
     yv[6][n] = (double)nt;





     for (i=ct;i<y;i+=nt)
     {

         yv[3][n] = (double)i;
# 1321 "fjpeg.c"
         for (j=0;j<x;j++)
         {
      ni = i + 1;
      nj = j + 1;
      pi = i - 1;
      pj = j - 1;

      if (ni == y) ni = 0;
      if (nj == x) nj = 0;
      if (pi == -1) pi = y - 1;
      if (pj == -1) pj = x - 1;

      for (z=0;z<n;z++) yv[0][z] = (double)iv[z][i][j];
      for (z=0;z<n;z++) yv[1][z] = (double)iv[z][pi][pj];
      for (z=0;z<n;z++) yv[2][z] = (double)iv[z][pi][j];
      for (z=0;z<n;z++) yv[3][z] = (double)iv[z][pi][nj];
      for (z=0;z<n;z++) yv[4][z] = (double)iv[z][i][pj];
      for (z=0;z<n;z++) yv[5][z] = (double)iv[z][i][nj];
      for (z=0;z<n;z++) yv[6][z] = (double)iv[z][ni][pj];
      for (z=0;z<n;z++) yv[7][z] = (double)iv[z][ni][j];
      for (z=0;z<n;z++) yv[8][z] = (double)iv[z][ni][nj];

             yv[1][n] = (double)j;

      ov[i][j] = (unsigned long)fpar_f(ct, xv, yv);

         }
     }

     for (i=0;i<9;i++) free((void*)yv[i]);
     free((void*)yv);
# 1361 "fjpeg.c"
}

void tests()
{
    char* eq;
    char ieq[1024];
    int n;
    double y, r, **yv;

    n = 1;
    strcpy(ieq, "1-(y1^y1)");
    eq = (char*)malloc((strlen(ieq) + 3) * sizeof(char));

    strcpy(eq, ieq);
    strcat(eq, "\n");
    fpar_init(1);
    fpar_function(0, n, 0, eq);
    if (!fpar_ok(0))
    {
 printf("Function not accepted.\n");
 return;
    }

    yv = (double**)malloc(sizeof(double*));
    yv[0] = (double*)malloc(n * sizeof(double));

    for (y=0.0;y<=1.1;y+=0.05)
    {
 yv[0][0] = y;
 r = fpar_f(0, 0., yv);
 printf("f(%f) = %f\n", y, r);
    }

    free((void*)yv[0]);
    free((void*)yv);

    fpar_deinit();
}

void* convert_thread(void* ptr)
{
    int n, ocx, ocy, ct, nt, udfmode;
    unsigned long ***bits, **obits;
    thread_args* vargs;

    vargs = (thread_args*)ptr;

    n = vargs->n;
    ocx = vargs->ocx;
    ocy = vargs->ocy;
    ct = vargs->ct;
    nt = vargs->nt;
    bits = vargs->bits;
    obits = vargs->obits;
    udfmode = vargs->udfmode;





    translate_file(n, bits, obits, ocx, ocy, ct, nt, udfmode);




    free((void*)vargs);

    return ((void *)0);
}

int fjpg(char* ofn, char* ieq, int n, char** ifn, int nt)
{
    int err, *cx, *cy, ocx, ocy, i, z, udfmode;
    unsigned long ***bits, **obits;




    char* eq;
    FILE* fp;

    pthread_t *thr;

    thread_args args, *vargs;

    struct timeval tod1, tod2, tuse;






    if (nt < 1)
    {
 printf("No work threads, exiting\n");
 return 0;
    }





    alloc_cache(n);

    eq = (char*)malloc((strlen(ieq) + 3) * sizeof(char));
    bits = (unsigned long***)malloc(n * sizeof(unsigned long**));
    cx = (int*)malloc(n * sizeof(int));
    cy = (int*)malloc(n * sizeof(int));

    thr = (pthread_t*)malloc(nt * sizeof(pthread_t));

    ocx = 0xFFFF;
    ocy = 0xFFFF;
    udfmode = 0;

    if (!strcmp(ieq, "none")) udfmode = 13;

    else if (!strcmp(ieq, "asmf1")) udfmode = 4;
    else if (!strcmp(ieq, "asmf2") && n >= 2) udfmode = 11;
    else if (!strcmp(ieq, "asmf3") && n >= 3) udfmode = 12;

    else if (!strcmp(ieq, "udf1") && n >= 1) udfmode = 1;
    else if (!strcmp(ieq, "udfi1") && n >= 1) udfmode = 5;
    else if (!strcmp(ieq, "udf2") && n >= 2) udfmode = 2;
    else if (!strcmp(ieq, "udfi2") && n >= 2) udfmode = 6;
    else if (!strcmp(ieq, "udf3") && n >= 3) udfmode = 3;
    else if (!strcmp(ieq, "udfi3") && n >= 3) udfmode = 7;
    else if (!strcmp(ieq, "udfpi2")) udfmode = 8;
    else if (!strcmp(ieq, "udfpi3")) udfmode = 9;
    else if (!strcmp(ieq, "udfi6") && n >= 6) udfmode = 10;

    else if (!strcmp(ieq, "asmf2") && n < 2)
    {
 printf("To use asmf2 fast mode, you need to set at least 2 input images\n");
 return 32;
    }
    else if (!strcmp(ieq, "asmf3") && n < 3)
    {
 printf("To use asmf3 fast mode, you need to set at least 3 input images\n");
 return 32;
    }

    else if (!strcmp(ieq, "udf2") && n < 2)
    {
 printf("To use udf2 fast mode, you need to set at least 2 input images\n");
 return 32;
    }
    else if (!strcmp(ieq, "udf3") && n < 3)
    {
 printf("To use udf3 fast mode, you need to set at least 3 input images\n");
 return 64;
    }
    else if (!strcmp(ieq, "udfi2") && n < 2)
    {
 printf("To use udfi2 fast mode, you need to set at least 2 input images\n");
 return 32;
    }
    else if (!strcmp(ieq, "udfi3") && n < 3)
    {
 printf("To use udfi3 fast mode, you need to set at least 3 input images\n");
 return 64;
    }
    else if (!strcmp(ieq, "udfi6") && n < 6)
    {
 printf("To use udfi6 fast mode, you need to set at least 6 input images\n");
 return 64;
    }


    if (ualoop && (udfmode == 4 || udfmode == 11 || udfmode == 12))
    {



 nt = 1;
    }
# 1548 "fjpeg.c"
    fp = fopen(ofn, "r");
    if (fp)
    {
 if (overwrite_mode)
 {



     fclose(fp);
 }
 else
 {
     printf("File %s exists, not overwriting\n", ofn);
     fclose(fp);
     return 1;
 }
    }

    if (!udfmode)
    {



        strcpy(eq, ieq);
        strcat(eq, "\n");

        fpar_init(nt);
        for (z=0;z<nt;z++) fpar_function(z, n+1, 8, eq);

        if (!fpar_ok(0))
        {
     printf("Function not accepted.\n");
     return 2;
        }
    }
# 1594 "fjpeg.c"
    for (i=0;i<n;i++)
    {







 if (strcasestr(ifn[i], ".jpg") || strcasestr(ifn[i], ".jpeg"))
 {

     err = load_jpeg_file(&bits[i], &cx[i], &cy[i], ifn[i]);




 }
 else if (strcasestr(ifn[i], ".png"))
 {

     err = load_png_file(&bits[i], &cx[i], &cy[i], ifn[i]);




 }
 else if (strcasestr(ifn[i], ".bmp"))
 {
     err = load_bmp_file(&bits[i], &cx[i], &cy[i], ifn[i]);
 }
 else
 {
     err = 1;
     printf("Unknown file type: %s, supported are JPG, PNG, BMP\n", ifn[i]);
 }

        if (err)
        {
     printf("Cannot load %s\n", ifn[i]);
     return 4;
        }

 if (cx[i] < ocx)
 {
     if (ocx < 0xFFFF) printf("\nWarning X-resolution downgrade: %d --> %d\n", ocx, cx[i]);
     ocx = cx[i];
 }
 else if (cx[i] > ocx) printf("\nWarning X-resolution bigger than actual: %d > %d\n", cx[i], ocx);

 if (cy[i] < ocy)
 {
     if (ocy < 0xFFFF) printf("\nWarning Y-resolution downgrade: %d --> %d\n", ocy, cy[i]);
     ocy = cy[i];
 }
 else if (cy[i] > ocy) printf("\nWarning Y-resolution bigger than actual: %d > %d\n", cy[i], ocy);


    }
# 1663 "fjpeg.c"
    obits = (unsigned long**)calloc(ocy, sizeof(unsigned long*));
    for (i=0;i<ocy;i++) obits[i] = (unsigned long*)calloc(ocx, sizeof(unsigned long));





    if (nt > 1 && udfmode != 13)
    {
        args.n = n;
        args.bits = bits;
        args.obits = obits;
        args.ocx = ocx;
        args.ocy = ocy;
        args.nt = nt;
 args.udfmode = udfmode;

        for (z=0;z<nt;z++)
        {
            args.ct = z;
     vargs = (thread_args*)malloc(sizeof(thread_args));
     memcpy((void*)vargs, (void*)&args, sizeof(thread_args));

            if (pthread_create(&thr[z], ((void *)0), convert_thread, (void*)vargs))
     {
         printf("Failed to create %d/%d thread\n", z+1, nt);
         return 8;
     }



        }


        for (z=0;z<nt;z++)
        {



     pthread_join(thr[z], ((void *)0));



        }

    }
    else
    {
     if (udfmode == 13)
     {



  obits = bits[0];
     }
     else
     {
         translate_file(n, bits, obits, ocx, ocy, 0, 1, udfmode);
     }
    }

    if (!udfmode)
    {
        fpar_deinit();
    }





    if (strcasestr(ofn, ".jpg") || strcasestr(ofn, ".jpeg"))
    {

     err = save_jpeg_file(obits, ocx, ocy, ofn);




    }
    else if (strcasestr(ofn, ".png"))
    {

     err = save_png_file(obits, ocx, ocy, ofn);




    }
    else if (strcasestr(ofn, ".bmp"))
    {
     err = save_bmp_file(obits, ocx, ocy, ofn);
    }
    else
    {
        err = 1;
        printf("Unknown file type: %s, supported are JPG, PNG, BMP\n", ofn);
    }

    if (err)
    {
 printf("Cannot save %s\n", ofn);
 return 16;
    }






    gettimeofday(&tod2, ((void *)0));
    do { (&tuse)->tv_sec = (&tod2)->tv_sec - (&tod1)->tv_sec; (&tuse)->tv_usec = (&tod2)->tv_usec - (&tod1)->tv_usec; if ((&tuse)->tv_usec < 0) { (&tuse)->tv_sec--; (&tuse)->tv_usec += 1000000; } } while (0);






    printf("%s ", ofn);



    return 0;
}

void separate_options(int lb, char** par, int* lb_o, char*** par_o, int* lb_f, char*** par_f)
{
    int i, l, t0, t1;
    char c;
    short *t;

    t = (short*)malloc(lb*sizeof(short));
    *lb_o = *lb_f = 1;

    for (i=1;i<lb;i++)
    {
 l = strlen(par[i]);
 if (l < 2)
 {
     (*lb_f) ++;
     t[i] = 0;
     continue;
 }

 if (par[i][0] != '-')
 {
     (*lb_f) ++;
     t[i] = 0;
     continue;
 }

 c = par[i][1];

 if ((c >= 'a' && c < 'x') || (c >= 'A' && c < 'X'))
 {
     if ((l > 2 && par[i][2] >= '0' && par[i][2] <= '9') || l == 2)
     {
      (*lb_o) ++;
      t[i] = 1;
     }
     else
     {
  (*lb_f) ++;
  t[i] = 0;
     }
 }
    }

    *par_f = (char**)malloc(*lb_f*sizeof(char*));
    *par_o = (char**)malloc(*lb_o*sizeof(char*));

    (*par_f)[0] = (char*)malloc((strlen(par[0])+1)*sizeof(char));
    (*par_o)[0] = (char*)malloc((strlen(par[0])+1)*sizeof(char));

    strcpy((*par_f)[0], par[0]);
    strcpy((*par_o)[0], par[0]);

    t0 = t1 = 1;
    for (i=1;i<lb;i++)
    {
 if (t[i])
 {
     (*par_o)[t1] = (char*)malloc((strlen(par[i])+1)*sizeof(char));
     strcpy((*par_o)[t1], par[i]);
     t1 ++;
 }
 else
 {
     (*par_f)[t0] = (char*)malloc((strlen(par[i])+1)*sizeof(char));
     strcpy((*par_f)[t0], par[i]);
     t0 ++;
 }
    }







}

void usage(char* prog)
{
    printf("%s outfile.jpg 'equation' n_threads infile(s).jpg [...] [-a|-n|-q val]\n", prog);
    printf("\t-a\tdisable faster but singlethread assembler loop processing\n");
    printf("\t-n\tdisable automatic output file overwrite\n");
    printf("\t-q\tjpeg quality[100]\n");
    fpar_info();
}

int main(int lb, char** par)
{
    int n, i, r;
    char **infiles, u;

    int lb_f, lb_o;
    char **par_f, **par_o;

    struct timeval at1, at2, atuse;
    gettimeofday(&at1, ((void *)0));


    separate_options(lb, par, &lb_o, &par_o, &lb_f, &par_f);







    while ((u = getopt(lb_o, par_o,"hanq:"))!=-1)
    {
 switch (u)
 {

  case 'a': ualoop = 0; break;



  case 'n': overwrite_mode = 0; break;

  case 'q': jqual = atoi(optarg); break;



  case 'h': usage(par_f[0]); return 0;
  default: printf("Unrecognized option\n"); return 1;
 }
    }

    if (lb_f < 4) usage(par_f[0]);
    else
    {
 n = lb_f - 4;
 infiles = (char**)malloc(n * sizeof(char*));
 for (i=4;i<lb_f;i++)
 {
     infiles[i-4] = (char*)malloc((strlen(par_f[i]) + 1) * sizeof(char));
     strcpy(infiles[i-4], par_f[i]);
 }




 r = fjpg(par_f[1], par_f[2], n, infiles, atoi(par_f[3]));

     gettimeofday(&at2, ((void *)0));
        do { (&atuse)->tv_sec = (&at2)->tv_sec - (&at1)->tv_sec; (&atuse)->tv_usec = (&at2)->tv_usec - (&at1)->tv_usec; if ((&atuse)->tv_usec < 0) { (&atuse)->tv_sec--; (&atuse)->tv_usec += 1000000; } } while (0);
        printf("%d.%06ds\n", (int)atuse.tv_sec, (int)atuse.tv_usec);

 return r;

    }
    return 32;
}
